/*!
 * Code Box
 * https://github.com/Jirkasa/code-box
 * Copyright (c) 2024 Jiří Satora
 * Licensed under the MIT license.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CodeBox",[],t):"object"==typeof exports?exports.CodeBox=t():e.CodeBox=t()}(window,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{CodeBox:()=>u,CodeBoxCodeView:()=>p,CodeBoxCodeViewManager:()=>f,CodeBoxCreator:()=>_e,CodeBoxFile:()=>E,CodeBoxFileManager:()=>g,CodeBoxMemento:()=>_,CodeView:()=>c,CodeViewButton:()=>I,CodeViewCreator:()=>Ie,CodeViewMemento:()=>d,ElementCodeViewButton:()=>v,ElementFileButon:()=>T,FileButton:()=>O,HighlightBox:()=>n,ProjectCodeBox:()=>he,ProjectCodeBoxCodeView:()=>ne,ProjectCodeBoxCreator:()=>Oe,ProjectCodeBoxFile:()=>ae,TabCodeBox:()=>S,TabCodeBoxCodeView:()=>B,TabCodeBoxCreator:()=>me,TabCodeBoxFile:()=>V,VirtualCodeBox:()=>ge,VirtualCodeBoxCreator:()=>Te});const i=function(){function e(){}return e.CODE_VIEW="cb-code-view",e.CODE_VIEW_GUTTER="cb-code-view__gutter",e.CODE_VIEW_GUTTER_HIDDEN_MODIFIER="cb-code-view__gutter--hidden",e.CODE_VIEW_LINE_NUMBER="cb-code-view__line-number",e.CODE_VIEW_LINE_NUMBER_HIDDEN_MODIFIER="cb-code-view__line-number--hidden",e.CODE_VIEW_CONTAINER="cb-code-view__container",e.CODE_VIEW_CONTENT_CONTAINER="cb-code-view__content",e.CODE_VIEW_HIGHLIGHT_BOX="cb-code-view__highlight",e.TAB_CODE_BOX="cb-tab-code-box",e.TAB_CODE_BOX_TABS="cb-tab-code-box__tabs",e.TAB_CODE_BOX_TAB="cb-tab-code-box__tab",e.TAB_CODE_BOX_TAB_ACTIVE_MODIFIER="cb-tab-code-box__tab--active",e.TAB_CODE_BOX_TAB_ICON="cb-tab-code-box__tab-icon",e.TAB_CODE_BOX_TAB_DOWNLOAD_ICON="cb-tab-code-box__tab-download-icon",e.TAB_CODE_BOX_TAB_TEXT="cb-tab-code-box__tab-text",e.TAB_CODE_BOX_CODE_VIEW_CONTAINER="cb-tab-code-box__code-view-container",e.TAB_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER="cb-tab-code-box__code-view-container--hidden",e.TAB_CODE_BOX_NO_CODE_VIEW="cb-tab-code-box__no-code-view",e.TAB_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER="cb-tab-code-box__no-code-view--hidden",e.TAB_CODE_BOX_NO_CODE_VIEW_MESSAGE="cb-tab-code-box__no-code-view-message",e.PROJECT_CODE_BOX="cb-project-code-box",e.PROJECT_CODE_BOX_PANEL_CONTAINER="cb-project-code-box__panel-container",e.PROJECT_CODE_BOX_CODE_VIEW_CONTAINER="cb-project-code-box__code-view-container",e.PROJECT_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER="cb-project-code-box__code-view-container--hidden",e.PROJECT_CODE_BOX_NO_CODE_VIEW="cb-project-code-box__no-code-view",e.PROJECT_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER="cb-project-code-box__no-code-view--hidden",e.PROJECT_CODE_BOX_NO_CODE_VIEW_MESSAGE="cb-project-code-box__no-code-view-message",e.PROJECT_CODE_BOX_PANEL="cb-project-code-box__panel",e.PROJECT_CODE_BOX_PANEL_OPENED_MODIFIER="cb-project-code-box__panel--opened",e.PROJECT_CODE_BOX_PANEL_CONTENT="cb-project-code-box__panel-content",e.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON="cb-project-code-box__panel-open-button",e.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON_OPENED_MODIFIER="cb-project-code-box__panel-open-button--opened",e.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON_ICON="cb-project-code-box__panel-open-button-icon",e.PROJECT_CODE_BOX_PANEL_HEADING="cb-project-code-box__panel-heading",e.PROJECT_CODE_BOX_PANEL_FOLDER_STRUCTURE_CONTAINER="cb-project-code-box__panel-folder-structure-container",e.PROJECT_CODE_BOX_PANEL_PACKAGES_CONTAINER="cb-project-code-box__panel-packages-container",e.PROJECT_CODE_BOX_PANEL_ITEM="cb-project-code-box__panel-item",e.PROJECT_CODE_BOX_PANEL_ITEM_ACTIVE_MODIFIER="cb-project-code-box__panel-item--active",e.PROJECT_CODE_BOX_PANEL_ITEM_FOLDER_OPENED_MODIFIER="cb-project-code-box__panel-item--folder-opened",e.PROJECT_CODE_BOX_PANEL_ITEM_PROJECT_MODIFIER="cb-project-code-box__panel-item--project",e.PROJECT_CODE_BOX_PANEL_ITEM_PACKAGE_MODIFIER="cb-project-code-box__panel-item--package",e.PROJECT_CODE_BOX_PANEL_ITEM_DEFAULT_PACKAGE_MODIFIER="cb-project-code-box__panel-item--default-package",e.PROJECT_CODE_BOX_PANEL_ITEM_FOLDER_MODIFIER="cb-project-code-box__panel-item--folder",e.PROJECT_CODE_BOX_PANEL_ITEM_FILE_MODIFIER="cb-project-code-box__panel-item--file",e.PROJECT_CODE_BOX_PANEL_ITEM_ICON="cb-project-code-box__panel-item-icon",e.PROJECT_CODE_BOX_PANEL_ITEM_ARROW_ICON="cb-project-code-box__panel-item-arrow-icon",e.PROJECT_CODE_BOX_PANEL_ITEM_TEXT="cb-project-code-box__panel-item-text",e.PROJECT_CODE_BOX_PANEL_ITEM_DOWNLOAD_ICON="cb-project-code-box__panel-item-download-icon",e.PROJECT_CODE_BOX_PANEL_COLLAPSIBLE="cb-project-code-box__panel-collapsible",e.PROJECT_CODE_BOX_PANEL_COLLAPSIBLE_OPENED_MODIFIDER="cb-project-code-box__panel-collapsible--opened",e.PROJECT_CODE_BOX_PANEL_HORIZONTAL_RULE="cb-project-code-box__panel-horizontal-rule",e.VIRTUAL_CODE_BOX="cb-virtual-code-box",e.VIRTUAL_CODE_BOX_CODE_VIEW_CONTAINER="cb-virtual-code-box__code-view-container",e.VIRTUAL_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER="cb-virtual-code-box__code-view-container--hidden",e.VIRTUAL_CODE_BOX_NO_CODE_VIEW="cb-virtual-code-box__no-code-view",e.VIRTUAL_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER="cb-virtual-code-box__no-code-view--hidden",e.VIRTUAL_CODE_BOX_NO_CODE_VIEW_MESSAGE="cb-virtual-code-box__no-code-view-message",e}();const o={DATA_ATTRIBUTE_PREFIX:"cb",LAZY_INITIALIZATION_MARGIN:"100px",DEFAULT_LINE_HEIGHT:2,DEFAULT_LINE_HEIGHT_UNIT:"rem",DEFAULT_NO_CODE_VIEW_SELECTED_ELEMENT_HEIGHT:"50rem",DEFAULT_NO_CODE_VIEW_SELECTED_TEXT:"No code view selected",DEFAULT_CODE_VIEW_BUTTON_TEXT:"unnamed",DEFAULT_FILE_BUTTON_TEXT:"unnamed",DEFAULT_PROJECT_NAME:"unnamed",DEFAULT_PROJECT_FOLDER_STRUCTURE_HEADING:"Folder structure",DEFAULT_PROJECT_PACKAGES_HEADING:"Packages",DEFAULT_DEFAULT_PACKAGE_NAME:"default",DEFAULT_FOLDER_ANIMATION_SPEED:200,DEFAULT_FOLDER_ANIMATION_EASING_FUNCTION:"ease-in-out",DEFAULT_CREATE_FOLDERS_FOR_PACKAGES:!0,DEFAULT_OPEN_PANEL_BUTTON_ARIA_LABEL:"Open panel",DEFAULT_CLOSE_PANEL_BUTTON_ARIA_LABEL:"Close panel"};const n=function(){function e(e,t,o,n,r,a){var s=this;this.codeView=n,this.removeHighlightBoxEventSource=r,this.start=Math.min(Math.max(Math.trunc(t),1),n.linesCount),this.end=Math.max(Math.min(Math.trunc(o),n.linesCount),this.start),this.element=document.createElement("div"),this.element.classList.add(i.CODE_VIEW_HIGHLIGHT_BOX),this.setRange(this.start,this.end),a.onDetach=function(){return s.onDetach()},a.onUnlinkCodeView=function(){return s.onUnlinkCodeView()},e.appendChild(this.element)}return e.prototype.getStart=function(){return this.start},e.prototype.getEnd=function(){return this.end},e.prototype.setRange=function(e,t){void 0===t&&(t=e),this.codeView&&(this.start=Math.min(Math.max(Math.trunc(e),1),this.codeView.linesCount),this.end=Math.max(Math.min(Math.trunc(t),this.codeView.linesCount),this.start),this.element.style.transform="translateY(".concat(this.codeView.lineHeight*(this.start-1)).concat(this.codeView.lineHeightUnit,")"),this.element.style.height="".concat(this.codeView.lineHeight*(this.end-this.start+1)).concat(this.codeView.lineHeightUnit))},e.prototype.remove=function(){this.codeView&&this.removeHighlightBoxEventSource.fire(this,this)},e.prototype.onDetach=function(){this.element.remove()},e.prototype.onUnlinkCodeView=function(){this.codeView=null},e}();function r(e){return{highlight:e.highlight,lineHeight:e.lineHeight,lineHeightUnit:e.lineHeightUnit,showGutter:e.showGutter,showLineNumbers:e.showLineNumbers,cssClasses:e.cssClasses}}const a=function(e,t){this.highlightBox=e,this.highlightBoxManager=t};const s=function(){function e(){this.onDetach=null,this.onUnlinkCodeView=null}return e.prototype.detach=function(){this.onDetach&&this.onDetach()},e.prototype.unlinkCodeView=function(){this.onUnlinkCodeView&&this.onUnlinkCodeView()},e}();const l=function(){function e(){this.handlers=new Map,this.count=0}return e.prototype.subscribe=function(e){return this.handlers.set(this.count,e),this.count++},e.prototype.unsubscribe=function(e){this.handlers.delete(e)},e.prototype.fire=function(e,t){this.handlers.forEach((function(i){i(e,t)}))},e}();const d=function(){function e(e){this.highlights=new Array,this.showGutter=e.isGutterVisible(),this.showLineNumbers=e.areLineNumbersVisible();for(var t=0,i=e.getHighlightBoxes();t<i.length;t++){var o=i[t];this.highlights.push([o.getStart(),o.getEnd()])}}return e.prototype.apply=function(e){this.showGutter?e.showGutter():e.hideGutter(),this.showLineNumbers?e.showLineNumbers():e.hideLineNumbers(),e.removeHighlights();for(var t=0,i=this.highlights;t<i.length;t++){var o=i[t];e.addHighlight(o[0],o[1])}},e}();const c=function(){function e(e,t){void 0===t&&(t={});var n=this;if(this.highlightBoxEntries=new Array,this.removeHighlightBoxEventSource=new l,!(e instanceof HTMLPreElement))throw new Error("Passed element is not pre element.");this.preElement=e,this.initialOptions=r(t),this.fillOptionsFromDataset(this.initialOptions,e.dataset),this.initialOptions.cssClasses&&function(e){for(var t=0;t<e.length;t++)0===e[t].trim().length&&(e.splice(t,1),t--)}(this.initialOptions.cssClasses);var a=this.getCodeElement(e);this.lineHeight=this.initialOptions.lineHeight||o.DEFAULT_LINE_HEIGHT,this.lineHeightUnit=this.initialOptions.lineHeightUnit||o.DEFAULT_LINE_HEIGHT_UNIT,a.style.lineHeight=this.lineHeight.toString()+this.lineHeightUnit,this.linesCount=this.getLinesCount(a),this.rootElement=document.createElement("div"),this.rootElement.classList.add(i.CODE_VIEW),e.parentElement&&e.parentElement.insertBefore(this.rootElement,e),this.rootElement.innerHTML="",this.gutterElement=document.createElement("div"),this.gutterElement.classList.add(i.CODE_VIEW_GUTTER),this.rootElement.appendChild(this.gutterElement),this.containerElement=document.createElement("div"),this.containerElement.classList.add(i.CODE_VIEW_CONTAINER),this.rootElement.appendChild(this.containerElement);var s=document.createElement("div");s.classList.add(i.CODE_VIEW_CONTENT_CONTAINER),this.containerElement.appendChild(s),s.appendChild(e),void 0===this.initialOptions.showLineNumbers||this.initialOptions.showLineNumbers?(this.lineNumberElementsVisible=!0,this.lineNumberElements=this.fillLineNumbers(this.gutterElement)):(this.lineNumberElementsVisible=!1,this.lineNumberElements=this.fillLineNumbers(this.gutterElement,!0)),this.removeHighlightBoxEventSource.subscribe((function(e,t){return n.onRemoveHighlightBox(t)})),this.reset()}return e.prototype.appendTo=function(e){e.appendChild(this.rootElement)},e.prototype.detach=function(){this.rootElement.remove()},e.prototype.reset=function(){var e;this.removeHighlights(),void 0===this.initialOptions.showGutter||this.initialOptions.showGutter?this.showGutter():this.hideGutter(),void 0===this.initialOptions.showLineNumbers||this.initialOptions.showLineNumbers&&!this.lineNumberElementsVisible?this.showLineNumbers():this.lineNumberElementsVisible&&this.hideLineNumbers(),void 0!==this.initialOptions.highlight&&this.initHighlights(this.initialOptions.highlight),void 0!==this.initialOptions.cssClasses&&(e=this.rootElement.classList).add.apply(e,this.initialOptions.cssClasses)},e.prototype.createMemento=function(){return new d(this)},e.prototype.applyMemento=function(e){e.apply(this)},e.prototype.clone=function(){var t=this.preElement.cloneNode(!0);return t.removeAttribute("id"),new e(t,this.initialOptions)},e.prototype.addHighlight=function(e,t){void 0===t&&(t=e);var i=new s,o=new n(this.containerElement,e,t,this,this.removeHighlightBoxEventSource,i);return this.highlightBoxEntries.push(new a(o,i)),o},e.prototype.removeHighlights=function(e,t){void 0===e&&(e=null),void 0===t&&(t=e),null===e&&(e=1),null===t&&(t=this.linesCount);for(var i=0;i<this.highlightBoxEntries.length;i++){var o=this.highlightBoxEntries[i];o.highlightBox.getStart()<=t&&o.highlightBox.getEnd()>=e&&(o.highlightBoxManager.detach(),o.highlightBoxManager.unlinkCodeView(),this.highlightBoxEntries.splice(i,1),i--)}},e.prototype.getHighlightBoxes=function(e,t){void 0===e&&(e=null),void 0===t&&(t=e),null===e&&(e=1),null===t&&(t=this.linesCount);for(var i=new Array,o=0,n=this.highlightBoxEntries;o<n.length;o++){var r=n[o];r.highlightBox.getStart()<=t&&r.highlightBox.getEnd()>=e&&i.push(r.highlightBox)}return i},e.prototype.showGutter=function(){this.gutterElement.classList.remove(i.CODE_VIEW_GUTTER_HIDDEN_MODIFIER)},e.prototype.hideGutter=function(){this.gutterElement.classList.add(i.CODE_VIEW_GUTTER_HIDDEN_MODIFIER)},e.prototype.isGutterVisible=function(){return!this.gutterElement.classList.contains(i.CODE_VIEW_GUTTER_HIDDEN_MODIFIER)},e.prototype.showLineNumbers=function(){this.lineNumberElementsVisible=!0;for(var e=0,t=this.lineNumberElements;e<t.length;e++){t[e].classList.remove(i.CODE_VIEW_LINE_NUMBER_HIDDEN_MODIFIER)}},e.prototype.hideLineNumbers=function(){this.lineNumberElementsVisible=!1;for(var e=0,t=this.lineNumberElements;e<t.length;e++){t[e].classList.add(i.CODE_VIEW_LINE_NUMBER_HIDDEN_MODIFIER)}},e.prototype.areLineNumbersVisible=function(){return this.lineNumberElementsVisible},e.prototype.getCode=function(){return this.preElement.innerText},e.prototype.onRemoveHighlightBox=function(e){for(var t=0;t<this.highlightBoxEntries.length;t++){var i=this.highlightBoxEntries[t];if(i.highlightBox===e){i.highlightBoxManager.detach(),i.highlightBoxManager.unlinkCodeView(),this.highlightBoxEntries.splice(t,1);break}}},e.prototype.initHighlights=function(e){for(var t=0,i=e.split(",");t<i.length;t++){var o=i[t].split("-"),n=void 0,r=void 0;if(o[0]&&(n=parseInt(o[0]),!Number.isNaN(n))){if(n<1&&(n=1),o[1]){if(r=parseInt(o[1]),Number.isNaN(r))continue}else r=n;this.addHighlight(n,r)}}},e.prototype.fillLineNumbers=function(e,t){void 0===t&&(t=!1);for(var o=new Array,n=1;n<=this.linesCount;n++){var r=document.createElement("div");r.classList.add(i.CODE_VIEW_LINE_NUMBER),t&&r.classList.add(i.CODE_VIEW_LINE_NUMBER_HIDDEN_MODIFIER),r.style.lineHeight=this.lineHeight.toString()+this.lineHeightUnit,r.innerText=n.toString(),e.appendChild(r),o.push(r)}return o},e.prototype.getLinesCount=function(e){return null===e.textContent?0:e.textContent.split("\n").length},e.prototype.fillOptionsFromDataset=function(e,t){var i;if(void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"Highlight"]&&(e.highlight=t[o.DATA_ATTRIBUTE_PREFIX+"Highlight"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ShowGutter"]&&(e.showGutter="true"===t[o.DATA_ATTRIBUTE_PREFIX+"ShowGutter"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ShowLineNumbers"]&&(e.showLineNumbers="true"===t[o.DATA_ATTRIBUTE_PREFIX+"ShowLineNumbers"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"LineHeight"]&&(e.lineHeight=Number.parseFloat(t[o.DATA_ATTRIBUTE_PREFIX+"LineHeight"]||""),Number.isNaN(e.lineHeight)))throw new Error("Line height option must be a number.");void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"LineHeightUnit"]&&(e.lineHeightUnit=t[o.DATA_ATTRIBUTE_PREFIX+"LineHeightUnit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"CssClasses"]&&(e.cssClasses=(null===(i=t[o.DATA_ATTRIBUTE_PREFIX+"CssClasses"])||void 0===i?void 0:i.split(" "))||new Array)},e.prototype.getCodeElement=function(e){for(var t=0,i=Array.from(e.children);t<i.length;t++){var o=i[t];if("CODE"===o.tagName&&o instanceof HTMLElement)return o}throw new Error("Passed element does not have code element as its children")},e}();const h=function(){function e(){var e=this;this.elements=new Map,this.observer=new IntersectionObserver((function(t){return e.intersectionObserverCallback(t)}),{root:null,rootMargin:"".concat(o.LAZY_INITIALIZATION_MARGIN," 0px ").concat(o.LAZY_INITIALIZATION_MARGIN," 0px")})}return e.observe=function(t,i){var o=e.getInstance();o.observer.observe(t),o.elements.set(t,i)},e.unobserve=function(t){var i=e.getInstance();i.observer.unobserve(t),i.elements.delete(t)},e.prototype.intersectionObserverCallback=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t],n=this.elements.get(o.target);n&&n(o.isIntersecting)}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.instance=null,e}();const u=function(){function e(t,i,n,a){void 0===a&&(a=null);var s=this;this.minCodeViewLinesCount=null,this.activeCodeView=null,this.initialized=!1,this.lazyInitPlaceholderElement=null,this.onInitCallbacks=new Array,this.rootElement=t,this.fillOptionsFromDataset(i,t.dataset),this.defaultCodeViewOptions=i.defaultCodeViewOptions?r(i.defaultCodeViewOptions):null,this.minCodeViewLinesCount=i.minCodeViewLinesCount||null;var l=Array();this.initializationData=new Array;for(var d=null,c=0;c<this.rootElement.children.length;c++){var u=this.rootElement.children[c];if(u instanceof HTMLElement)if(u instanceof HTMLPreElement){if(!(E=e.getCodeElement(u)))continue;void 0!==u.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"]&&(d&&delete d.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"],d=u),l.push(u),this.initializationData.push({type:"PreElement",preElement:u})}else if(void 0!==u.dataset[o.DATA_ATTRIBUTE_PREFIX+"File"]){var p={dataset:u.dataset,name:u.dataset[o.DATA_ATTRIBUTE_PREFIX+"Name"]||o.DEFAULT_FILE_BUTTON_TEXT,downloadLink:u.dataset[o.DATA_ATTRIBUTE_PREFIX+"File"]||null};this.initializationData.push({type:"FileInfo",fileInfo:p})}else this.initializationData.push({type:"HTMLElement",element:u})}if(i.implicitActive&&!d&&l.length>0){var f=l[0];f.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"]="true",d=f}if(this.rootElement.innerHTML="",n.customizeRootElement(this.rootElement),this.codeViewContainer=n.createCodeViewContainer(),this.codeViewContainerCSSHiddenClass=n.getCodeViewContainerCSSHiddenClass(),this.noCodeViewSelectedCSSHiddenClass=n.getNoCodeViewCSSHiddenClass(),this.noCodeViewSelectedElement=n.createNoCodeViewSelectedElement(i.noCodeViewSelectedElementHeight||o.DEFAULT_NO_CODE_VIEW_SELECTED_ELEMENT_HEIGHT,i.noCodeViewSelectedText||o.DEFAULT_NO_CODE_VIEW_SELECTED_TEXT),n.assembleElements(this.rootElement,this.codeViewContainer,this.noCodeViewSelectedElement),0!==l.length&&(i.implicitActive||d)||this.showNoCodeViewSelectedMessage(),(void 0===i.lazyInit||i.lazyInit)&&this.rootElement.parentElement){if(this.lazyInitPlaceholderElement=document.createElement("div"),null===a)if(d){var E;if(!(E=e.getCodeElement(d)))return void this.init();var g=e.getLinesCount(E),_=(null!==this.minCodeViewLinesCount&&this.minCodeViewLinesCount>=g?this.minCodeViewLinesCount:g)*e.getCodeViewLineHeight(d,i.defaultCodeViewOptions||{});this.lazyInitPlaceholderElement.style.height="".concat(_).concat(e.getCodeViewLineHeightUnit(d,i.defaultCodeViewOptions||{}))}else this.lazyInitPlaceholderElement.style.height=i.noCodeViewSelectedElementHeight||o.DEFAULT_NO_CODE_VIEW_SELECTED_ELEMENT_HEIGHT;else this.lazyInitPlaceholderElement.style.height=a;this.rootElement.parentElement.insertBefore(this.lazyInitPlaceholderElement,this.rootElement),this.rootElement.style.setProperty("display","none"),h.observe(this.lazyInitPlaceholderElement,(function(e){return s.onLazyInitPlaceholderElementIntersectionChange(e)}))}else this.init()}return e.prototype.appendTo=function(e){e.appendChild(this.rootElement)},e.prototype.detach=function(){this.rootElement.remove()},e.prototype.init=function(){if(!this.initialized){this.rootElement.style.removeProperty("display"),this.lazyInitPlaceholderElement&&(h.unobserve(this.lazyInitPlaceholderElement),this.lazyInitPlaceholderElement.remove(),this.lazyInitPlaceholderElement=null);var e=new Array;if(this.initializationData)for(var t=0,i=this.initializationData;t<i.length;t++){var n=i[t];if("PreElement"===n.type&&n.preElement){var r=n.preElement,a=new c(r,this.defaultCodeViewOptions||{});a.detach(),void 0!==r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"]&&this.changeActiveCodeView(a),e.push({type:"CodeViewInfo",codeViewInfo:{codeView:a,dataset:r.dataset}})}else"FileInfo"===n.type&&n.fileInfo?e.push({type:"FileInfo",fileInfo:n.fileInfo}):"HTMLElement"===n.type&&n.element&&e.push({type:"HTMLElement",element:n.element})}if(this.onInit(e),this.initializationData=null,this.defaultCodeViewOptions=null,this.initialized=!0,this.onAfterInit(),this.onInitCallbacks){for(var s=0,l=this.onInitCallbacks;s<l.length;s++){(0,l[s])()}this.onInitCallbacks=null}}},e.prototype.isInitialized=function(){return this.initialized},e.prototype.addOnInitListener=function(e){this.isInitialized()||null!==this.onInitCallbacks&&this.onInitCallbacks.push(e)},e.prototype.onAfterInit=function(){},e.prototype.changeActiveCodeView=function(e){if(this.activeCodeView&&this.activeCodeView.detach(),this.activeCodeView=e,null!==e){if(e.appendTo(this.codeViewContainer),null!==this.minCodeViewLinesCount){var t=this.minCodeViewLinesCount*e.lineHeight;this.codeViewContainer.style.setProperty("min-height",t+e.lineHeightUnit)}else this.codeViewContainer.style.removeProperty("min-height");this.hideNoCodeViewSelectedMessage()}else this.showNoCodeViewSelectedMessage()},e.prototype.getCurrentlyActiveCodeView=function(){return this.activeCodeView},e.prototype.getPreElementsBeforeInitialization=function(){if(!this.initializationData)return null;for(var e=new Array,t=0,i=this.initializationData;t<i.length;t++){var o=i[t];"PreElement"===o.type&&o.preElement&&e.push(o.preElement)}return e},e.prototype.showNoCodeViewSelectedMessage=function(){this.noCodeViewSelectedElement.classList.remove(this.noCodeViewSelectedCSSHiddenClass),this.noCodeViewSelectedElement.setAttribute("aria-hidden","false"),this.codeViewContainer.classList.add(this.codeViewContainerCSSHiddenClass),this.codeViewContainer.setAttribute("aria-hidden","true")},e.prototype.hideNoCodeViewSelectedMessage=function(){this.noCodeViewSelectedElement.classList.add(this.noCodeViewSelectedCSSHiddenClass),this.noCodeViewSelectedElement.setAttribute("aria-hidden","true"),this.codeViewContainer.classList.remove(this.codeViewContainerCSSHiddenClass),this.codeViewContainer.setAttribute("aria-hidden","false")},e.prototype.onLazyInitPlaceholderElementIntersectionChange=function(e){e&&this.init()},e.getLinesCount=function(e){return null===e.textContent?0:e.textContent.split("\n").length},e.prototype.fillOptionsFromDataset=function(e,t){if(void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"LazyInit"]&&(e.lazyInit="true"===t[o.DATA_ATTRIBUTE_PREFIX+"LazyInit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ImplicitActive"]&&(e.implicitActive="true"===t[o.DATA_ATTRIBUTE_PREFIX+"ImplicitActive"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"NoCodeViewSelectedElementHeight"]&&(e.noCodeViewSelectedElementHeight=t[o.DATA_ATTRIBUTE_PREFIX+"NoCodeViewSelectedElementHeight"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"NoCodeViewSelectedText"]&&(e.noCodeViewSelectedText=t[o.DATA_ATTRIBUTE_PREFIX+"NoCodeViewSelectedText"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"MinCodeViewLinesCount"]&&(e.minCodeViewLinesCount=Number.parseInt(t[o.DATA_ATTRIBUTE_PREFIX+"MinCodeViewLinesCount"]||""),Number.isNaN(e.minCodeViewLinesCount)))throw new Error("Min code view lines count option must be a number.")},e.getCodeElement=function(e){for(var t=0,i=Array.from(e.children);t<i.length;t++){var o=i[t];if("CODE"===o.tagName&&o instanceof HTMLElement)return o}return null},e.getCodeViewLineHeight=function(e,t){if(void 0!==e.dataset[o.DATA_ATTRIBUTE_PREFIX+"LineHeight"]){var i=Number.parseFloat(e.dataset[o.DATA_ATTRIBUTE_PREFIX+"LineHeight"]||"");return Number.isNaN(i)?o.DEFAULT_LINE_HEIGHT:i}return void 0!==t.lineHeight?t.lineHeight:o.DEFAULT_LINE_HEIGHT},e.getCodeViewLineHeightUnit=function(e,t){return void 0!==e.dataset[o.DATA_ATTRIBUTE_PREFIX+"LineHeightUnit"]?e.dataset[o.DATA_ATTRIBUTE_PREFIX+"LineHeightUnit"]||o.DEFAULT_LINE_HEIGHT_UNIT:void 0!==t.lineHeightUnit?t.lineHeightUnit:o.DEFAULT_LINE_HEIGHT_UNIT},e.CODE_BOX_NOT_INITIALIZED_ERROR="Code box is not initialized.",e}();const p=function(){function e(e,t,i,o){var n=this;this.identifier=e,this.codeView=t,this.codeBox=i,this.lineHeight=t.lineHeight,this.lineHeightUnit=t.lineHeightUnit,this.linesCount=t.linesCount,o.onIdentifierChange=function(e){return n.onIdentifierChange(e)},o.onUnlinkCodeBox=function(){return n.onUnlinkCodeBox()}}return e.prototype.getIdentifier=function(){return this.codeBox?this.identifier:null},e.prototype.changeIdentifier=function(e){return!!this.codeBox&&this.codeBox.changeCodeViewIdentifier(this.identifier,e)},e.prototype.setAsActive=function(){this.codeBox&&this.codeBox.setActiveCodeView(this.identifier)},e.prototype.remove=function(){this.codeBox&&this.codeBox.removeCodeView(this.identifier)},e.prototype.reset=function(){this.codeView.reset()},e.prototype.createMemento=function(){return this.codeView.createMemento()},e.prototype.applyMemento=function(e){this.codeView.applyMemento(e)},e.prototype.clone=function(){return this.codeView.clone()},e.prototype.addHighlight=function(e,t){return void 0===t&&(t=e),this.codeView.addHighlight(e,t)},e.prototype.removeHighlights=function(e,t){void 0===e&&(e=null),void 0===t&&(t=e),this.codeView.removeHighlights(e,t)},e.prototype.getHighlightBoxes=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=e),this.codeView.getHighlightBoxes(e,t)},e.prototype.showGutter=function(){this.codeView.showGutter()},e.prototype.hideGutter=function(){this.codeView.hideGutter()},e.prototype.isGutterVisible=function(){return this.codeView.isGutterVisible()},e.prototype.showLineNumbers=function(){this.codeView.showLineNumbers()},e.prototype.hideLineNumbers=function(){this.codeView.hideLineNumbers()},e.prototype.areLineNumbersVisible=function(){return this.codeView.areLineNumbersVisible()},e.prototype.getCode=function(){return this.codeView.getCode()},e.prototype.onIdentifierChange=function(e){this.identifier=e},e.prototype.onUnlinkCodeBox=function(){this.codeBox=null},e}();const f=function(){function e(){this.onIdentifierChange=null,this.onUnlinkCodeBox=null}return e.prototype.changeIdentifier=function(e){this.onIdentifierChange&&this.onIdentifierChange(e)},e.prototype.unlinkCodeBox=function(){this.onUnlinkCodeBox&&this.onUnlinkCodeBox()},e}();const E=function(){function e(e,t,i,o){var n=this;this.identifier=e,this.downloadLink=t,this.codeBox=i,o.onIdentifierChange=function(e){return n.onIdentifierChange(e)},o.onDownloadLinkChange=function(e){return n.onDownloadLinkChange(e)},o.onUnlinkCodeBox=function(){return n.onUnlinkCodeBox()}}return e.prototype.getIdentifier=function(){return this.codeBox?this.identifier:null},e.prototype.changeIdentifier=function(e){return!!this.codeBox&&this.codeBox.changeFileIdentifier(this.identifier,e)},e.prototype.remove=function(){this.codeBox&&this.codeBox.removeFile(this.identifier)},e.prototype.getDownloadLink=function(){return this.downloadLink},e.prototype.setDownloadLink=function(e){this.codeBox&&this.codeBox.changeFileDownloadLink(this.identifier,e)},e.prototype.onIdentifierChange=function(e){this.identifier=e},e.prototype.onDownloadLinkChange=function(e){this.downloadLink=e},e.prototype.onUnlinkCodeBox=function(){this.codeBox=null},e}();const g=function(){function e(){this.onIdentifierChange=null,this.onDownloadLinkChange=null,this.onUnlinkCodeBox=null}return e.prototype.changeIdentifier=function(e){this.onIdentifierChange&&this.onIdentifierChange(e)},e.prototype.changeDownloadLink=function(e){this.onDownloadLinkChange&&this.onDownloadLinkChange(e)},e.prototype.unlinkCodeBox=function(){this.onUnlinkCodeBox&&this.onUnlinkCodeBox()},e}();const _=function(){function e(e,t,i,o,n){this.creator=e,this.addCodeViewToCreatorCodeBox=t,this.codeViewEntries=i,this.fileEntries=o,this.activeCodeView=n}return e.prototype.getCreator=function(){return this.creator},e.prototype.apply=function(e){e.removeAllCodeViews(),e.removeAllFiles();for(var t=0,i=this.codeViewEntries;t<i.length;t++){var o=i[t];if(e===this.creator)o.codeView.applyMemento(o.codeViewMemento),this.addCodeViewToCreatorCodeBox(o.identifier,o.codeView);else{e.addCodeView(o.identifier,o.codeView);var n=e.getCodeView(o.identifier);null==n||n.applyMemento(o.codeViewMemento)}this.activeCodeView===o.codeView&&e.setActiveCodeView(o.identifier)}for(var r=0,a=this.fileEntries;r<a.length;r++){var s=a[r];e.addFile(s.identifier,s.downloadLink)}},e}();const I=function(){function e(e,t){this.showCodeViewEventSource=e,this.codeView=t}return e.prototype.showCodeView=function(){this.showCodeViewEventSource.fire(this,this.codeView)},e}();var C,m=(C=function(e,t){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},C(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});const v=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.buttonElement=document.createElement("button"),o.buttonElement.addEventListener("click",(function(){return o.showCodeView()})),o}return m(t,e),t.prototype.appendTo=function(e){e.appendChild(this.buttonElement)},t.prototype.detach=function(){this.buttonElement.remove()},t.prototype.enableTabNavigation=function(){this.buttonElement.setAttribute("tabindex","0")},t.prototype.disableTabNavigation=function(){this.buttonElement.setAttribute("tabindex","-1")},t}(I);const O=function(){};var w=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const T=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.buttonElement=document.createElement("a"),i.buttonElement.setAttribute("download",""),i.setDownloadLink(t),i}return w(t,e),t.prototype.appendTo=function(e){e.appendChild(this.buttonElement)},t.prototype.detach=function(){this.buttonElement.remove()},t.prototype.setDownloadLink=function(e){null!==e?this.buttonElement.setAttribute("href",e):this.buttonElement.removeAttribute("href")},t.prototype.getDownloadLink=function(){return this.buttonElement.getAttribute("href")},t.prototype.enableTabNavigation=function(){this.buttonElement.setAttribute("tabindex","0")},t.prototype.disableTabNavigation=function(){this.buttonElement.setAttribute("tabindex","-1")},t}(O);const A=function(e,t,i,o){this.codeBoxCodeView=e,this.codeBoxCodeViewManager=t,this.codeViewButton=i,this.position=o};const P=function(e,t,i,o){this.codeBoxFile=e,this.codeBoxFileManager=t,this.fileButton=i,this.position=o};const F=function(){function e(){this.tabsContainer=document.createElement("div"),this.tabsContainer.classList.add(i.TAB_CODE_BOX_TABS)}return e.prototype.getTabsContainer=function(){return this.tabsContainer},e.prototype.customizeRootElement=function(e){e.classList.add(i.TAB_CODE_BOX)},e.prototype.createCodeViewContainer=function(){var e=document.createElement("div");return e.classList.add(i.TAB_CODE_BOX_CODE_VIEW_CONTAINER),e},e.prototype.getCodeViewContainerCSSHiddenClass=function(){return i.TAB_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER},e.prototype.createNoCodeViewSelectedElement=function(e,t){var o=document.createElement("div");o.classList.add(i.TAB_CODE_BOX_NO_CODE_VIEW),o.style.height=e;var n=document.createElement("p");return n.classList.add(i.TAB_CODE_BOX_NO_CODE_VIEW_MESSAGE),n.innerText=t,o.appendChild(n),o},e.prototype.getNoCodeViewCSSHiddenClass=function(){return i.TAB_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER},e.prototype.assembleElements=function(e,t,i){e.appendChild(this.tabsContainer),e.appendChild(t),e.appendChild(i)},e}();var y=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.getButtonPosition=function(){return this.codeBox?this.codeBox.getCodeViewButtonPosition(this.identifier):null},t.prototype.setButtonPosition=function(e){return!!this.codeBox&&this.codeBox.setCodeViewButtonPosition(this.identifier,e)},t}(p);var N=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.getButtonPosition=function(){return this.codeBox?this.codeBox.getFileButtonPosition(this.identifier):null},t.prototype.setButtonPosition=function(e){return!!this.codeBox&&this.codeBox.setFileButtonPosition(this.identifier,e)},t}(E);var D=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const R=function(e){function t(t,i,o,n,r){var a=e.call(this,t,i,o,n,r)||this;return a.tabCodeBoxCodeViewEntries=o,a.tabCodeBoxFileEntries=n,a}return D(t,e),t.prototype.apply=function(t){if(e.prototype.apply.call(this,t),t instanceof S){for(var i=0,o=this.tabCodeBoxCodeViewEntries;i<o.length;i++){var n=o[i];t.setCodeViewButtonPosition(n.identifier,n.position)}for(var r=0,a=this.tabCodeBoxFileEntries;r<a.length;r++){n=a[r];t.setFileButtonPosition(n.identifier,n.position)}}},t}(_);const k=function(){function e(){}return e.create=function(e,t){return'\n        <svg>\n            <use xlink:href="'.concat(e,"#").concat(t,'"></use>\n        </svg>\n        ')},e}();var b=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const M=function(e){function t(t,o,n,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var s=e.call(this,o,n)||this;s.buttonElement.classList.add(i.TAB_CODE_BOX_TAB);var l=document.createElement("div");return l.classList.add(i.TAB_CODE_BOX_TAB_ICON),r&&a&&(l.innerHTML=k.create(r,a)),s.buttonElement.appendChild(l),s.textElement=document.createElement("div"),s.textElement.classList.add(i.TAB_CODE_BOX_TAB_TEXT),s.textElement.innerText=t,s.buttonElement.appendChild(s.textElement),s}return b(t,e),t.prototype.setText=function(e){this.textElement.innerText=e},t.prototype.setAsActive=function(){this.buttonElement.classList.add(i.TAB_CODE_BOX_TAB_ACTIVE_MODIFIER)},t.prototype.setAsInactive=function(){this.buttonElement.classList.remove(i.TAB_CODE_BOX_TAB_ACTIVE_MODIFIER)},t}(v);var L=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const x=function(e){function t(t,o,n,r,a){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=null);var s=e.call(this,o)||this;s.downloadIcon=null,s.buttonElement.classList.add(i.TAB_CODE_BOX_TAB);var l=document.createElement("div");return l.classList.add(i.TAB_CODE_BOX_TAB_ICON),n&&r&&(l.innerHTML=k.create(n,r)),s.buttonElement.appendChild(l),s.textElement=document.createElement("div"),s.textElement.innerText=t,s.textElement.classList.add(i.TAB_CODE_BOX_TAB_TEXT),s.buttonElement.appendChild(s.textElement),n&&a&&(s.downloadIcon=document.createElement("div"),s.downloadIcon.classList.add(i.TAB_CODE_BOX_TAB_DOWNLOAD_ICON),s.downloadIcon.innerHTML=k.create(n,a),null!==o&&s.buttonElement.appendChild(s.downloadIcon)),s}return L(t,e),t.prototype.setText=function(e){this.textElement.innerText=e},t.prototype.setDownloadLink=function(t){e.prototype.setDownloadLink.call(this,t),this.downloadIcon&&(null!==t?this.buttonElement.appendChild(this.downloadIcon):this.downloadIcon.remove())},t}(T);var X=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const S=function(e){function t(t,i){void 0===i&&(i={});var o=this,n=new F;return(o=e.call(this,t,i,n)||this).showCodeViewEventSource=new l,o.initialMemento=null,o.codeViews=new Map,o.codeViewEntries=new Map,o.fileEntries=new Map,o.tabsContainer=n.getTabsContainer(),o.showCodeViewEventSource.subscribe((function(e,t){return o.onShowCodeView(e,t)})),o.svgSpritePath=i.svgSpritePath||null,i.svgSpriteIcons?(o.codeFileIconName=i.svgSpriteIcons.codeFile||null,o.fileIconName=i.svgSpriteIcons.file||null,o.downloadIconName=i.svgSpriteIcons.download||null):(o.codeFileIconName=null,o.fileIconName=null,o.downloadIconName=null),o}return X(t,e),t.prototype.addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.codeViews.has(e))return!1;var i=t.clone();return this._addCodeView(e,i)},t.prototype._addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.codeViews.has(e))return!1;var i=new M(e,this.showCodeViewEventSource,t,this.svgSpritePath,this.codeFileIconName);i.appendTo(this.tabsContainer);var o=new f,n=new B(e,t,this,o);this.codeViews.set(e,t);var r=this.codeViewEntries.size+this.fileEntries.size;return this.codeViewEntries.set(t,new A(n,o,i,r)),!0},t.prototype.getCodeViews=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.codeViewEntries.forEach((function(t){return e.push(t.codeBoxCodeView)})),e},t.prototype.getCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViews.get(e);if(!t)return null;var i=this.codeViewEntries.get(t);return i?i.codeBoxCodeView:null},t.prototype.removeCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViews.get(e);if(!t)return!1;var i=this.codeViewEntries.get(t);return!!i&&(i.codeViewButton.detach(),this.getCurrentlyActiveCodeView()===t&&this.setNoActiveCodeView(),i.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViews.delete(e),this.codeViewEntries.delete(t),this.decrementItemPositionsAfterPosition(i.position),!0)},t.prototype.removeAllCodeViews=function(){var e=this;if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.codeViews.forEach((function(t){var i=e.codeViewEntries.get(t);i&&(i.codeViewButton.detach(),i.codeBoxCodeViewManager.unlinkCodeBox(),e.decrementItemPositionsAfterPosition(i.position))})),this.codeViews.clear(),this.codeViewEntries.clear(),this.setNoActiveCodeView()},t.prototype.changeCodeViewIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.codeViews.get(e);if(!i)return!1;if(this.codeViews.has(t))return!1;var o=this.codeViewEntries.get(i);return!!o&&(o.codeViewButton.setText(t),o.codeBoxCodeViewManager.changeIdentifier(t),this.codeViews.delete(e),this.codeViews.set(t,i),!0)},t.prototype.getCodeViewButtonPosition=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViews.get(e);if(!t)return null;var i=this.codeViewEntries.get(t);return i?i.position:null},t.prototype.setCodeViewButtonPosition=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);t=Math.trunc(t);var i=this.codeViewEntries.size+this.fileEntries.size-1;if(t<0||t>i)return!1;var o=this.codeViews.get(e);if(!o)return!1;var n=this.codeViewEntries.get(o);if(!n)return!1;var r=!1;return this.codeViewEntries.forEach((function(e){e.position===t&&(e.position=n.position,r=!0)})),r||this.fileEntries.forEach((function(e){e.position===t&&(e.position=n.position,r=!0)})),!!r&&(n.position=t,this.updateButtonsOrder(),!0)},t.prototype.setActiveCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViews.get(e);if(!t)return!1;var i=this.codeViewEntries.get(t);if(!i)return!1;var o=this.getCurrentlyActiveCodeView();if(o){var n=this.codeViewEntries.get(o);null==n||n.codeViewButton.setAsInactive()}return i.codeViewButton.setAsActive(),this.changeActiveCodeView(t),!0},t.prototype.setNoActiveCodeView=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=this.getCurrentlyActiveCodeView();if(e){var t=this.codeViewEntries.get(e);null==t||t.codeViewButton.setAsInactive()}this.changeActiveCodeView(null)},t.prototype.getActiveCodeView=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=this.getCurrentlyActiveCodeView();if(!e)return null;var t=this.codeViewEntries.get(e);return t?t.codeBoxCodeView:null},t.prototype.addFile=function(e,t){if(void 0===t&&(t=null),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.fileEntries.has(e))return!1;var i=new x(e,t,this.svgSpritePath,this.fileIconName,this.downloadIconName);i.appendTo(this.tabsContainer);var o=new g,n=new V(e,t,this,o),r=this.codeViewEntries.size+this.fileEntries.size;return this.fileEntries.set(e,new P(n,o,i,r)),!0},t.prototype.getFiles=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.fileEntries.forEach((function(t){return e.push(t.codeBoxFile)})),e},t.prototype.getFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.fileEntries.get(e);return t?t.codeBoxFile:null},t.prototype.removeFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.fileEntries.get(e);return!!t&&(t.fileButton.detach(),this.fileEntries.delete(e),this.decrementItemPositionsAfterPosition(t.position),!0)},t.prototype.removeAllFiles=function(){var e=this;if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.fileEntries.forEach((function(t){t.fileButton.detach(),e.decrementItemPositionsAfterPosition(t.position)})),this.fileEntries.clear()},t.prototype.changeFileIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.fileEntries.get(e);return!!i&&(!this.fileEntries.has(t)&&(i.fileButton.setText(t),i.codeBoxFileManager.changeIdentifier(t),this.fileEntries.delete(e),this.fileEntries.set(t,i),!0))},t.prototype.changeFileDownloadLink=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.fileEntries.get(e);return!!i&&(i.codeBoxFileManager.changeDownloadLink(t),i.fileButton.setDownloadLink(t),!0)},t.prototype.getFileButtonPosition=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.fileEntries.get(e);return t?t.position:null},t.prototype.setFileButtonPosition=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);t=Math.trunc(t);var i=this.codeViewEntries.size+this.fileEntries.size-1;if(t<0||t>i)return!1;var o=this.fileEntries.get(e);if(!o)return!1;var n=!1;return this.codeViewEntries.forEach((function(e){e.position===t&&(e.position=o.position,n=!0)})),n||this.fileEntries.forEach((function(e){e.position===t&&(e.position=o.position,n=!0)})),!!n&&(o.position=t,this.updateButtonsOrder(),!0)},t.prototype.reset=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.initialMemento&&this.applyMemento(this.initialMemento)},t.prototype.createMemento=function(){var e=this;if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=new Array,i=new Array;return this.codeViewEntries.forEach((function(e,i){var o=e.codeBoxCodeView.getIdentifier();null!==o&&t.push({codeView:i,codeViewMemento:i.createMemento(),identifier:o,position:e.position})})),this.fileEntries.forEach((function(e){var t=e.codeBoxFile.getIdentifier();null!==t&&i.push({downloadLink:e.codeBoxFile.getDownloadLink(),identifier:t,position:e.position})})),new R(this,(function(t,i){return e._addCodeView(t,i)}),t,i,this.getCurrentlyActiveCodeView())},t.prototype.applyMemento=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);e.apply(this)},t.prototype.onInit=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if("CodeViewInfo"===n.type&&n.codeViewInfo){var r=n.codeViewInfo,a=r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Name"]||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,s=void 0!==r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"];if(this.codeViews.has(a)){if(!s)continue;var l=this.codeViews.get(a);if(l){var d=this.codeViewEntries.get(l);d&&(d.codeViewButton.detach(),d.codeBoxCodeViewManager.unlinkCodeBox()),this.codeViews.delete(a),this.codeViewEntries.delete(l)}}var c=new M(a,this.showCodeViewEventSource,r.codeView,this.svgSpritePath,this.codeFileIconName);s&&c.setAsActive(),c.appendTo(this.tabsContainer);var h=new f,u=new B(a,r.codeView,this,h);this.codeViews.set(a,r.codeView);var p=this.codeViewEntries.size+this.fileEntries.size;this.codeViewEntries.set(r.codeView,new A(u,h,c,p))}else if("FileInfo"===n.type&&n.fileInfo){var E=n.fileInfo;a=E.name;if(this.fileEntries.has(a))continue;var _=new x(a,E.downloadLink,this.svgSpritePath,this.fileIconName,this.downloadIconName);_.appendTo(this.tabsContainer);var I=new g,C=new V(a,E.downloadLink,this,I);p=this.codeViewEntries.size+this.fileEntries.size;this.fileEntries.set(a,new P(C,I,_,p))}}},t.prototype.onAfterInit=function(){this.initialMemento=this.createMemento()},t.prototype.onShowCodeView=function(e,t){var i=this.getCurrentlyActiveCodeView();if(i){var o=this.codeViewEntries.get(i);null==o||o.codeViewButton.setAsInactive()}e.setAsActive(),this.changeActiveCodeView(t)},t.prototype.decrementItemPositionsAfterPosition=function(e){this.codeViewEntries.forEach((function(t){t.position>e&&t.position--})),this.fileEntries.forEach((function(t){t.position>e&&t.position--}))},t.prototype.updateButtonsOrder=function(){var e=new Array;this.codeViewEntries.forEach((function(t){return e.push(t)})),this.fileEntries.forEach((function(t){return e.push(t)}));for(var t=0;t<e.length;t++){var i=e[t];e[t]=e[i.position],e[i.position]=i}for(var o=0,n=e;o<n.length;o++){var r=n[o];r instanceof A?r.codeViewButton.appendTo(this.tabsContainer):r.fileButton.appendTo(this.tabsContainer)}},t}(u);const U=function(e,t){this.codeBoxCodeView=e,this.codeBoxCodeViewManager=t};const z=function(e){this.codeBoxFileManager=e};const H=function(e){this.children=new Array,this.value=e};const j=function(e,t){this.codeView=e,this.codeViewButton=t};const Z=function(){function e(e,t,i,o,n){var r=this;this.opened=!1,this.isAnimating=!1,this.animationTimeoutId=null,this.delayTimeoutId=null,this.buttonElement=e,this.collapsibleElement=t,this.animationSpeed=i,this.animationEasingFunction=o,this.onToggle=n,this.buttonElement.addEventListener("click",(function(){return r.onButtonClick()})),this.collapsibleElement.style.setProperty("visibility","hidden"),this.collapsibleElement.style.setProperty("overflow","hidden"),this.collapsibleElement.style.setProperty("max-height","0px")}return e.prototype.open=function(t){var o=this;if(void 0===t&&(t=!0),this.clearTimeouts(),this.isAnimating=!1,this.opened=!0,this.onToggle(),this.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_FOLDER_OPENED_MODIFIER),this.collapsibleElement.classList.add(i.PROJECT_CODE_BOX_PANEL_COLLAPSIBLE_OPENED_MODIFIDER),this.collapsibleElement.style.setProperty("visibility","visible"),t){this.isAnimating=!0;var n=this.getCollapsibleElementHeight();this.collapsibleElement.style.setProperty("max-height","0px"),this.collapsibleElement.style.setProperty("overflow","hidden"),this.collapsibleElement.style.setProperty("transition","".concat(this.animationSpeed,"ms ").concat(this.animationEasingFunction)),this.delayTimeoutId=window.setTimeout((function(){o.collapsibleElement.style.setProperty("max-height",n+"px"),o.delayTimeoutId=null}),e.DELAY_TIMEOUT),this.animationTimeoutId=window.setTimeout((function(){o.isAnimating=!1,o.collapsibleElement.style.setProperty("max-height","none"),o.collapsibleElement.style.removeProperty("transition"),o.collapsibleElement.style.removeProperty("overflow"),o.animationTimeoutId=null}),this.animationSpeed)}else this.collapsibleElement.style.setProperty("max-height","none"),this.collapsibleElement.style.removeProperty("overflow")},e.prototype.close=function(t){var o=this;void 0===t&&(t=!0),this.clearTimeouts(),this.isAnimating=!1,this.opened=!1,this.onToggle(),this.buttonElement.classList.remove(i.PROJECT_CODE_BOX_PANEL_ITEM_FOLDER_OPENED_MODIFIER),this.collapsibleElement.classList.remove(i.PROJECT_CODE_BOX_PANEL_COLLAPSIBLE_OPENED_MODIFIDER),this.collapsibleElement.style.setProperty("visibility","hidden"),this.collapsibleElement.style.setProperty("overflow","hidden"),t?(this.isAnimating=!0,this.collapsibleElement.style.setProperty("transition","".concat(this.animationSpeed,"ms ").concat(this.animationEasingFunction)),this.collapsibleElement.style.setProperty("max-height",this.getCollapsibleElementHeight()+"px"),this.delayTimeoutId=window.setTimeout((function(){o.collapsibleElement.style.setProperty("max-height","0px"),o.delayTimeoutId=null}),e.DELAY_TIMEOUT),this.animationTimeoutId=window.setTimeout((function(){o.isAnimating=!1,o.collapsibleElement.style.removeProperty("transition"),o.animationTimeoutId=null}),this.animationSpeed)):this.collapsibleElement.style.setProperty("max-height","0px")},e.prototype.isOpened=function(){return this.opened},e.prototype.onButtonClick=function(){this.isAnimating||(this.opened?this.close():this.open())},e.prototype.clearTimeouts=function(){null!==this.animationTimeoutId&&window.clearTimeout(this.animationTimeoutId),null!==this.delayTimeoutId&&window.clearTimeout(this.delayTimeoutId)},e.prototype.getCollapsibleElementHeight=function(){this.collapsibleElement.style.setProperty("max-height","none");var e=this.collapsibleElement.clientHeight;return this.collapsibleElement.style.removeProperty("max-height"),e},e.DELAY_TIMEOUT=5,e}();const G=function(e,t){this.codeBoxFile=e,this.fileButton=t};var W=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const J=function(e){function t(t,o,n,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var s=e.call(this,o,n)||this;s.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM,i.PROJECT_CODE_BOX_PANEL_ITEM_FILE_MODIFIER);var l=document.createElement("div");return l.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_ICON),r&&a&&(l.innerHTML=k.create(r,a)),s.buttonElement.appendChild(l),s.textElement=document.createElement("div"),s.textElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_TEXT),s.textElement.innerText=t,s.buttonElement.appendChild(s.textElement),s}return W(t,e),t.prototype.setText=function(e){this.textElement.innerText=e},t.prototype.setAsActive=function(){this.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_ACTIVE_MODIFIER)},t.prototype.setAsInactive=function(){this.buttonElement.classList.remove(i.PROJECT_CODE_BOX_PANEL_ITEM_ACTIVE_MODIFIER)},t}(v);var K=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const Y=function(e){function t(t,o,n,r,a){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=null);var s=e.call(this,o)||this;s.downloadIcon=null,s.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM,i.PROJECT_CODE_BOX_PANEL_ITEM_FILE_MODIFIER);var l=document.createElement("div");return l.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_ICON),n&&r&&(l.innerHTML=k.create(n,r)),s.buttonElement.appendChild(l),s.textElement=document.createElement("div"),s.textElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_TEXT),s.textElement.innerText=t,s.buttonElement.appendChild(s.textElement),n&&a&&(s.downloadIcon=document.createElement("div"),s.downloadIcon.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_DOWNLOAD_ICON),s.downloadIcon.innerHTML=k.create(n,a),null!==o&&s.buttonElement.appendChild(s.downloadIcon)),s}return K(t,e),t.prototype.setText=function(e){this.textElement.innerText=e},t.prototype.setDownloadLink=function(t){e.prototype.setDownloadLink.call(this,t),this.downloadIcon&&(null!==t?this.buttonElement.appendChild(this.downloadIcon):this.downloadIcon.remove())},t}(T);const q=function(){function e(e,t,o,n,r,a,s,l,d){void 0===r&&(r=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===d&&(d=null);var c=this;this.subfolders=new Map,this.codeViewItems=new Map,this.fileItems=new Map,this.buttonElement=document.createElement("button"),this.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM),l&&this.buttonElement.classList.add(l);var h=document.createElement("div");h.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_ARROW_ICON),r&&a&&(h.innerHTML=k.create(r,a)),this.buttonElement.appendChild(h);var u=document.createElement("div");u.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_ICON),r&&s&&(u.innerHTML=k.create(r,s)),this.buttonElement.appendChild(u),this.buttonTextElement=document.createElement("div"),this.buttonTextElement.classList.add(i.PROJECT_CODE_BOX_PANEL_ITEM_TEXT),this.buttonTextElement.innerText=e,this.buttonElement.appendChild(this.buttonTextElement),this.itemsContainer=document.createElement("div"),this.itemsContainer.classList.add(i.PROJECT_CODE_BOX_PANEL_COLLAPSIBLE),d&&(d.appendChild(this.buttonElement),d.appendChild(this.itemsContainer)),this.name=e,this.collapsible=new Z(this.buttonElement,this.itemsContainer,o,n,(function(){return c.onCollapsibleToggled()})),this.lastAllParentOpened=t,this.updateTabNavigation(this.lastAllParentOpened)}return e.prototype.appendTo=function(e){e.appendChild(this.buttonElement),e.appendChild(this.itemsContainer)},e.prototype.detach=function(){this.buttonElement.remove(),this.itemsContainer.remove()},e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){this.name=e,this.buttonTextElement.innerText=e},e.prototype.open=function(e){void 0===e&&(e=!0),this.collapsible.isOpened()||this.collapsible.open(e)},e.prototype.close=function(e){void 0===e&&(e=!0),this.collapsible.isOpened()&&this.collapsible.close(e)},e.prototype.isOpened=function(){return this.collapsible.isOpened()},e.prototype.updateTabNavigation=function(e){var t=this;e?this.buttonElement.setAttribute("tabindex","0"):this.buttonElement.setAttribute("tabindex","-1"),e&&this.collapsible.isOpened()?(this.codeViewItems.forEach((function(e){return e.codeViewButton.enableTabNavigation()})),this.fileItems.forEach((function(e){return e.fileButton.enableTabNavigation()}))):(this.codeViewItems.forEach((function(e){return e.codeViewButton.disableTabNavigation()})),this.fileItems.forEach((function(e){return e.fileButton.disableTabNavigation()}))),this.subfolders.forEach((function(i){i.updateTabNavigation(e&&t.collapsible.isOpened())})),e&&this.collapsible.isOpened()?(this.buttonElement.setAttribute("aria-expanded","true"),this.itemsContainer.setAttribute("aria-hidden","false")):(this.buttonElement.setAttribute("aria-expanded","false"),this.itemsContainer.setAttribute("aria-hidden","true")),this.lastAllParentOpened=e},e.prototype.addFolder=function(e,t){this.subfolders.has(e)||(this.subfolders.set(e,t),t.updateTabNavigation(this.lastAllParentOpened&&this.collapsible.isOpened()),this.sortItems())},e.prototype.getFolder=function(e){var t=this.subfolders.get(e);return t||null},e.prototype.getFolders=function(){var e=new Array;return this.subfolders.forEach((function(t){return e.push(t)})),e},e.prototype.removeFolder=function(e){var t=this.subfolders.get(e);return!!t&&(t.detach(),this.subfolders.delete(e),!0)},e.prototype.renameFolder=function(e,t){if(this.subfolders.has(t))return!1;var i=this.subfolders.get(e);return!!i&&(i.setName(t),this.subfolders.delete(e),this.subfolders.set(t,i),!0)},e.prototype.getFoldersCount=function(){return this.subfolders.size},e.prototype.addCodeView=function(e,t,i,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),this.codeViewItems.has(e))return null;var r=new J(e,i,t,o,n);this.lastAllParentOpened&&this.collapsible.isOpened()?r.enableTabNavigation():r.disableTabNavigation();var a=new j(t,r);return this.codeViewItems.set(e,a),this.sortItems(),a},e.prototype.getCodeView=function(e){var t=this.codeViewItems.get(e);return t||null},e.prototype.getCodeViews=function(e){void 0===e&&(e=!1);var t=new Array;return this.codeViewItems.forEach((function(e){return t.push(e)})),e&&this.subfolders.forEach((function(e){for(var i=0,o=e.getCodeViews(!0);i<o.length;i++){var n=o[i];t.push(n)}})),t},e.prototype.removeCodeView=function(e){var t=this.codeViewItems.get(e);return!!t&&(t.codeViewButton.detach(),this.codeViewItems.delete(e),!0)},e.prototype.getCodeViewsCount=function(){return this.codeViewItems.size},e.prototype.addFile=function(e,t,i,o,n){if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null),this.fileItems.has(e))return null;var r=new Y(e,t.getDownloadLink(),i,o,n);this.lastAllParentOpened&&this.collapsible.isOpened()?r.enableTabNavigation():r.disableTabNavigation();var a=new G(t,r);return this.fileItems.set(e,a),this.sortItems(),a},e.prototype.getFile=function(e){var t=this.fileItems.get(e);return t||null},e.prototype.getFiles=function(e){void 0===e&&(e=!1);var t=new Array;return this.fileItems.forEach((function(e){return t.push(e)})),e&&this.subfolders.forEach((function(e){for(var i=0,o=e.getFiles(!0);i<o.length;i++){var n=o[i];t.push(n)}})),t},e.prototype.removeFile=function(e){var t=this.fileItems.get(e);return!!t&&(t.fileButton.detach(),this.fileItems.delete(e),!0)},e.prototype.getFilesCount=function(){return this.fileItems.size},e.prototype.getCodeViewNamesInFolderAndSubfolders=function(){var e=new Array;return this.codeViewItems.forEach((function(t,i){return e.push(i)})),this.subfolders.forEach((function(t,i){for(var o=0,n=t.getCodeViewNamesInFolderAndSubfolders();o<n.length;o++){var r=n[o];e.push(i+"/"+r)}})),e},e.prototype.getFileNamesInFolderAndSubfolders=function(){var e=new Array;return this.fileItems.forEach((function(t,i){return e.push(i)})),this.subfolders.forEach((function(t,i){for(var o=0,n=t.getFileNamesInFolderAndSubfolders();o<n.length;o++){var r=n[o];e.push(i+"/"+r)}})),e},e.prototype.getFolderStructure=function(){var e={name:this.name,opened:this.isOpened()},t=new H(e);return this.subfolders.forEach((function(e){t.children.push(e.getFolderStructure())})),t},e.prototype.onCollapsibleToggled=function(){this.updateTabNavigation(this.lastAllParentOpened)},e.prototype.sortItems=function(){var e=Array.from(this.subfolders);e.sort((function(e,t){return e[0]>t[0]?1:-1}));var t=new Array;this.codeViewItems.forEach((function(e,i){return t.push([i,e])})),this.fileItems.forEach((function(e,i){return t.push([i,e])})),t.sort((function(e,t){return e[0]>t[0]?1:-1}));for(var i=0,o=e;i<o.length;i++){var n=o[i];this.itemsContainer.appendChild(n[1].buttonElement),this.itemsContainer.appendChild(n[1].itemsContainer)}for(var r=0,a=t;r<a.length;r++){var s=a[r];s[1]instanceof j?s[1].codeViewButton.appendTo(this.itemsContainer):s[1]instanceof G&&s[1].fileButton.appendTo(this.itemsContainer)}},e}();const $=function(){function e(){this.folderPathsToPackages=new Map,this.packages=new Map}return e.prototype.add=function(e,t,i){var o=t?t+"/"+e:e;this.folderPathsToPackages.set(o,{packageName:i,fileName:e});var n=this.packages.get(i);n||(n=new Map,this.packages.set(i,n)),n.set(e,o)},e.prototype.getFileFolderPathByPackageItem=function(e,t){var i=this.packages.get(e);if(!i)return null;var o=i.get(t);return void 0===o?null:o},e.prototype.getPackageItemByFileFolderPath=function(e,t){var i=e?e+"/"+t:t,o=this.folderPathsToPackages.get(i);return o?{packageName:o.packageName,fileName:o.fileName}:null},e.prototype.removeByFileFolderPath=function(e,t){var i=e?e+"/"+t:t,o=this.folderPathsToPackages.get(i);if(!o)return!1;var n=this.packages.get(o.packageName);return!!n&&(this.folderPathsToPackages.delete(i),n.delete(o.fileName),0===n.size&&this.packages.delete(o.packageName),!0)},e.prototype.removeByPackageItem=function(e,t){var i=this.packages.get(e);if(!i)return!1;var o=i.get(t);return void 0!==o&&(this.folderPathsToPackages.delete(o),i.delete(t),0===i.size&&this.packages.delete(e),!0)},e}();const Q=function(){function e(e,t,n,r,a,s,l,d,c,h,u,p,f,E,g,_,I,C){void 0===u&&(u=null),void 0===p&&(p=null),void 0===f&&(f=null),void 0===E&&(E=null),void 0===g&&(g=null),void 0===_&&(_=null),void 0===I&&(I=null),void 0===C&&(C=null),this.packages=new Map,this.defaultPackage=null,this.codeViewFolderAndPackageMappings=new $,this.fileFolderAndPackageMappings=new $,this.activeCodeViewIdentifier=null,this.panelOpened=!1,this.packagesContainer=t,this.packagesFolderPath=null!==r?this.parseFolderPath(r):[],this.createFoldersForPackages=s,this.foldersDelimiterForPackages=l,this.panelOpened=d,this.svgSpritePath=u,this.folderArrowIconName=p,this.folderIconName=E,this.packageIconName=g,this.codeFileIconName=_,this.fileIconName=I,this.downloadIconName=C,this.defaultPackageName=a||o.DEFAULT_DEFAULT_PACKAGE_NAME,this.openCloseAnimationSpeed=c,this.openCloseAnimationEasingFunction=h,this.rootFolder=new q(n,d,c,h,u,p,f,i.PROJECT_CODE_BOX_PANEL_ITEM_PROJECT_MODIFIER,e)}return e.prototype.isCreateFoldersForPackagesEnabled=function(){return this.createFoldersForPackages},e.prototype.getFoldersDelimiterForPackages=function(){return this.foldersDelimiterForPackages},e.prototype.getItemIdentifier=function(e,t,i,o){return void 0===i&&(i=!1),void 0===o&&(o=null),e=this.sanitizeFileName(e),null!==t&&(t=this.normalizeFolderPath(t)),null!==o&&(o=this.normalizePackageName(o)),""===(t=this.getFolderPath(t,i,o))?e:t+"/"+e},e.prototype.getNormalizedFolderPath=function(e){return this.normalizeFolderPath(e)},e.prototype.getSanitizedFolderName=function(e){return this.sanitizeFolderName(e)},e.prototype.setRootFolderName=function(e){this.rootFolder.setName(e)},e.prototype.addFolder=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e);this.getFolder(t,!0)},e.prototype.removeFolder=function(e){var t=this;e=this.normalizeFolderPath(e);var i=this.parseFolderPath(e),o=i.pop();if(void 0===o)return!1;var n=this.getFolder(i);if(!n)return!1;var r=n.getFolder(o);if(!r)return!1;for(var a=0,s=r.getCodeViewNamesInFolderAndSubfolders();a<s.length;a++){var l=s[a],d=e+"/"+l,c=(p=this.parseFolderPath(d)).pop();if(void 0!==c)if(d===this.activeCodeViewIdentifier&&(this.activeCodeViewIdentifier=null),f=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(p.join("/"),c))this.codeViewFolderAndPackageMappings.removeByPackageItem(f.packageName,c),(E=this.getPackageFolder(f.packageName))&&E.removeCodeView(c)}for(var h=0,u=r.getFileNamesInFolderAndSubfolders();h<u.length;h++){var p,f,E,g=u[h],_=(d=e+"/"+g,(p=this.parseFolderPath(d)).pop());if(void 0!==_)if(f=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(p.join("/"),_))this.fileFolderAndPackageMappings.removeByPackageItem(f.packageName,_),(E=this.getPackageFolder(f.packageName))&&E.removeFile(_)}if(this.createFoldersForPackages){var I=this.packagesFolderPath.join("/");if((I+"/").startsWith(e+"/")){if(this.defaultPackage){for(var C=0,m=this.defaultPackage.getCodeViewNamesInFolderAndSubfolders();C<m.length;C++){l=m[C];this.codeViewFolderAndPackageMappings.removeByPackageItem(null,l),this.defaultPackage.removeCodeView(l)}for(var v=0,O=this.defaultPackage.getFileNamesInFolderAndSubfolders();v<O.length;v++){g=O[v];this.fileFolderAndPackageMappings.removeByPackageItem(null,g),this.defaultPackage.removeFile(g)}this.defaultPackage.detach(),this.defaultPackage=null}this.packages.forEach((function(e,i){for(var o=0,n=e.getCodeViewNamesInFolderAndSubfolders();o<n.length;o++){var r=n[o];t.codeViewFolderAndPackageMappings.removeByPackageItem(i,r),e.removeCodeView(r)}for(var a=0,s=e.getFileNamesInFolderAndSubfolders();a<s.length;a++){var l=s[a];t.fileFolderAndPackageMappings.removeByPackageItem(i,l),e.removeFile(l)}e.detach()})),this.packages.clear()}if(e.startsWith(I+"/")){var w=new Array;this.packages.forEach((function(i,o){var n;if(n=null!==t.foldersDelimiterForPackages?o.split(t.foldersDelimiterForPackages):[o],(I+"/"+n.join("/")+"/").startsWith(e+"/")){for(var r=0,a=i.getCodeViewNamesInFolderAndSubfolders();r<a.length;r++){var s=a[r];t.codeViewFolderAndPackageMappings.removeByPackageItem(o,s),i.removeCodeView(s)}for(var l=0,d=i.getFileNamesInFolderAndSubfolders();l<d.length;l++){var c=d[l];t.fileFolderAndPackageMappings.removeByPackageItem(o,c),i.removeFile(c)}i.detach(),w.push(o)}}));for(var T=0,A=w;T<A.length;T++){var P=A[T];this.packages.delete(P)}}}return n.removeFolder(o),!0},e.prototype.renameFolder=function(e,t){var i=this;if(e=this.normalizeFolderPath(e),""===(t=this.sanitizeFolderName(t)))return null;var o=this.parseFolderPath(e),n=o.pop();if(void 0===n)return null;var r=this.getFolder(o);if(!r)return null;if(!r.renameFolder(n,t))return null;o.push(t);var a=e,s=o.join("/"),l=this.packagesFolderPath.join("/");if((l+"/").startsWith(a+"/")){var d=l.replace(a,s);this.packagesFolderPath=this.parseFolderPath(d)}if(this.createFoldersForPackages&&a.startsWith(l+"/")){var c=a.replace(l+"/","").split("/").length-1,h=new Array;this.packages.forEach((function(e,o){var r;if(!((r=null!==i.foldersDelimiterForPackages?o.split(i.foldersDelimiterForPackages):[o]).length-1<c)&&r[c]===n){var a;r[c]=t,a=null!==i.foldersDelimiterForPackages?r.join(i.foldersDelimiterForPackages):r[0],h.push({oldName:o,newName:a});for(var s=0,l=e.getCodeViewNamesInFolderAndSubfolders();s<l.length;s++){var d=l[s],u=d.split("/");if(d=u.pop()||"",null!==(E=i.codeViewFolderAndPackageMappings.getFileFolderPathByPackageItem(o,d)))(g=E.split("/")).pop(),i.codeViewFolderAndPackageMappings.removeByPackageItem(o,d),i.codeViewFolderAndPackageMappings.add(d,g.length>0?g.join("/"):null,a)}for(var p=0,f=e.getFileNamesInFolderAndSubfolders();p<f.length;p++){var E,g,_=f[p];u=_.split("/");if(_=u.pop()||"",null!==(E=i.fileFolderAndPackageMappings.getFileFolderPathByPackageItem(o,_)))(g=E.split("/")).pop(),i.fileFolderAndPackageMappings.removeByPackageItem(o,_),i.fileFolderAndPackageMappings.add(_,g.length>0?g.join("/"):null,a)}}}));for(var u=0,p=h;u<p.length;u++){var f=p[u],E=this.packages.get(f.oldName);E&&(E.setName(f.newName),this.packages.delete(f.oldName),this.packages.set(f.newName,E))}this.sortPackageFolders()}var g=r.getFolder(t);if(!g)return s;for(var _=0,I=g.getCodeViewNamesInFolderAndSubfolders();_<I.length;_++){var C=I[_],m=(d=a+"/"+C,(A=this.parseFolderPath(d)).pop());if(void 0!==m){var v=A.join("/");if(d===this.activeCodeViewIdentifier&&(this.activeCodeViewIdentifier=s+"/"+C),y=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(v,m)){d=s+"/"+C,(A=this.parseFolderPath(d)).pop();var O=A.join("/");this.codeViewFolderAndPackageMappings.removeByFileFolderPath(v,m),this.codeViewFolderAndPackageMappings.add(m,O,y.packageName)}}}for(var w=0,T=g.getFileNamesInFolderAndSubfolders();w<T.length;w++){var A,P=T[w],F=(d=a+"/"+P,(A=this.parseFolderPath(d)).pop());if(void 0!==F){var y;v=A.join("/");if(y=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(v,F)){d=s+"/"+P,(A=this.parseFolderPath(d)).pop();O=A.join("/");this.fileFolderAndPackageMappings.removeByFileFolderPath(v,F),this.fileFolderAndPackageMappings.add(F,O,y.packageName)}}}return s},e.prototype.folderExists=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e);return!!this.getFolder(t)},e.prototype.isFolderOpened=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=this.getFolder(t);return!!i&&i.isOpened()},e.prototype.getSubfolderNames=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=this.getFolder(t);if(!i)return null;for(var o=new Array,n=0,r=i.getFolders();n<r.length;n++){var a=r[n];o.push(a.getName())}return o},e.prototype.addPackage=function(e){return""!==(e=this.normalizePackageName(e))&&(this.getPackageFolder(e,!0),!0)},e.prototype.removePackage=function(e,t){if(void 0===t&&(t=!1),""===(e=this.normalizePackageName(e)))return!1;var i=this.getPackageFolder(e);if(!i)return!1;for(var o=0,n=i.getCodeViewNamesInFolderAndSubfolders();o<n.length;o++){var r=n[o];if(t){if(null===(d=this.codeViewFolderAndPackageMappings.getFileFolderPathByPackageItem(e,r)))continue;this.removeCodeViewByIdentifier(d)}else this.codeViewFolderAndPackageMappings.removeByPackageItem(e,r)}for(var a=0,s=i.getFileNamesInFolderAndSubfolders();a<s.length;a++){var l=s[a];if(t){var d;if(null===(d=this.fileFolderAndPackageMappings.getFileFolderPathByPackageItem(e,l)))continue;this.removeFileByIdentifier(d)}else this.fileFolderAndPackageMappings.removeByPackageItem(e,l)}return i.detach(),this.packages.delete(e),!0},e.prototype.getPackageFolderPath=function(e){if(null===e)return this.packagesFolderPath.join("/");if(e=this.normalizePackageName(e),!this.packageExists(e))return null;if(!this.createFoldersForPackages)return this.packagesFolderPath.join("/");var t;t=null!==this.foldersDelimiterForPackages?e.split(this.foldersDelimiterForPackages):[e];for(var i=[],o=0,n=this.packagesFolderPath;o<n.length;o++){var r=n[o];i.push(r)}for(var a=0,s=t;a<s.length;a++){r=s[a];i.push(r)}return i.join("/")},e.prototype.getFolderPathToRemovePackage=function(e){if(!this.createFoldersForPackages)return null;if(""===(e=this.normalizePackageName(e)))return null;var t,i=this.getPackageFolder(e);if(!i)return null;t=null!==this.foldersDelimiterForPackages?e.split(this.foldersDelimiterForPackages):[e];for(var o=[],n=0,r=this.packagesFolderPath;n<r.length;n++){var a=r[n];o.push(a)}for(var s=0,l=t;s<l.length;s++){a=l[s];o.push(a)}var d=this.getFolder(o);if(!d)return null;if(d.getCodeViewsCount()>i.getCodeViewsCount()||d.getFilesCount()>i.getFilesCount()||d.getFoldersCount()>0)return null;var c=o.join("/");for(o.pop();o.length>this.packagesFolderPath.length&&(d=this.getFolder(o))&&!(d.getCodeViewsCount()>0||d.getFilesCount()>0||d.getFoldersCount()>1);)c=o.join("/"),o.pop();return c},e.prototype.packageExists=function(e){return""!==(e=this.normalizePackageName(e))&&!!this.getPackageFolder(e)},e.prototype.isPackageFolderOpened=function(e){if(null!==e&&(e=this.normalizePackageName(e)),""===e)return!1;var t=this.getPackageFolder(e);return!!t&&t.isOpened()},e.prototype.hasPackages=function(){return null!==this.defaultPackage||this.packages.size>0},e.prototype.addCodeView=function(e,t,i,o,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=null),e=this.sanitizeFileName(e),null!==o&&(o=this.normalizeFolderPath(o)),null!==r&&(r=this.normalizePackageName(r)),o=this.getFolderPath(o,n,r),""===e)return!1;if(n&&""===r)return!1;var a=this.parseFolderPath(o),s=this.getFolder(a,!0);if(!s)return!1;if(null!==s.getCodeView(e))return!1;if(n){var l=this.getPackageFolder(r,!0);if(!l)return!1;if(null!==l.getCodeView(e))return!1;l.addCodeView(e,t,i,this.svgSpritePath,this.codeFileIconName),this.codeViewFolderAndPackageMappings.add(e,o,r)}return s.addCodeView(e,t,i,this.svgSpritePath,this.codeFileIconName),!0},e.prototype.getCodeViewByFolderPath=function(e,t){e=this.normalizeFolderPath(e||""),t=this.sanitizeFileName(t);var i=this.parseFolderPath(e),o=this.getFolder(i);if(!o)return null;var n=o.getCodeView(t);return n?n.codeView:null},e.prototype.getCodeViewByIdentifier=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(!i)return null;var o=this.getFolder(t);if(!o)return null;var n=o.getCodeView(i);return n?n.codeView:null},e.prototype.getCodeViewByPackage=function(e,t){null!==e&&(e=this.normalizePackageName(e)),t=this.sanitizeFileName(t);var i=this.getPackageFolder(e);if(!i)return null;var o=i.getCodeView(t);return o?o.codeView:null},e.prototype.getCodeViewsInFolder=function(e,t){void 0===t&&(t=!1),e=this.normalizeFolderPath(e||"");var i=this.parseFolderPath(e),o=this.getFolder(i),n=new Array;if(!o)return n;for(var r=0,a=o.getCodeViews(t);r<a.length;r++){var s=a[r];n.push(s.codeView)}return n},e.prototype.getCodeViewsInPackage=function(e){null!==e&&(e=this.normalizePackageName(e));var t=this.getPackageFolder(e),i=new Array;if(!t)return i;for(var o=0,n=t.getCodeViews();o<n.length;o++){var r=n[o];i.push(r.codeView)}return i},e.prototype.removeCodeViewByIdentifier=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e);if(0===t.length)return!1;var i=t.pop();if(!i)return!1;var o=this.getFolder(t);if(!o)return!1;if(!o.removeCodeView(i))return!1;e===this.activeCodeViewIdentifier&&(this.activeCodeViewIdentifier=null);var n=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(t.length>0?t.join("/"):null,i);if(!n)return!0;var r=this.getPackageFolder(n.packageName);return null==r||r.removeCodeView(i),r&&r===this.defaultPackage&&0===r.getCodeViewsCount()&&0===r.getFilesCount()&&(r.detach(),this.defaultPackage=null),this.codeViewFolderAndPackageMappings.removeByFileFolderPath(t.length>0?t.join("/"):null,i),!0},e.prototype.removeCodeViewByPackage=function(e,t){null!==e&&(e=this.normalizePackageName(e)),t=this.sanitizeFileName(t);var i=this.codeViewFolderAndPackageMappings.getFileFolderPathByPackageItem(e,t);return!!i&&this.removeCodeViewByIdentifier(i)},e.prototype.changeCodeViewIdentifier=function(e,t,i){e=this.normalizeFolderPath(e),t=this.normalizeFolderPath(t);var o=this.activeCodeViewIdentifier===e;if(""===t)return!1;if(null!==this.getCodeViewByIdentifier(t))return!1;var n=this.getCodeViewByIdentifier(e);if(!n)return!1;var r=this.parseFolderPath(e),a=r.pop();if(!a)return!1;var s=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(r.length>0?r.join("/"):null,a),l=(r=this.parseFolderPath(t)).pop();return!!l&&(o&&this.setNoCodeViewButtonAsActive(),!!this.removeCodeViewByIdentifier(e)&&(this.addCodeView(l,n,i,r.join("/"),null!==s,s?s.packageName:null),o&&this.setCodeViewButtonsAsActiveByIdentifier(t),!0))},e.prototype.getCodeViewPackage=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(i){var o=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(t.join("/"),i);if(o)return o.packageName}},e.prototype.removeCodeViewPackage=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(!i)return!1;var o=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(t.join("/"),i);if(!o)return!1;var n=this.getPackageFolder(o.packageName);return!!n&&(n.removeCodeView(i),this.codeViewFolderAndPackageMappings.removeByPackageItem(o.packageName,i),n===this.defaultPackage&&0===n.getCodeViewsCount()&&0===n.getFilesCount()&&(n.detach(),this.defaultPackage=null),!0)},e.prototype.addFile=function(e,t,i,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=null),e=this.sanitizeFileName(e),null!==i&&(i=this.normalizeFolderPath(i)),null!==n&&(n=this.normalizePackageName(n)),i=this.getFolderPath(i,o,n),""===e)return!1;if(o&&""===n)return!1;var r=this.parseFolderPath(i),a=this.getFolder(r,!0);if(!a)return!1;if(null!==a.getFile(e))return!1;if(o){var s=this.getPackageFolder(n,!0);if(!s)return!1;if(null!==s.getFile(e))return!1;s.addFile(e,t,this.svgSpritePath,this.fileIconName,this.downloadIconName),this.fileFolderAndPackageMappings.add(e,i,n)}return a.addFile(e,t,this.svgSpritePath,this.fileIconName,this.downloadIconName),!0},e.prototype.getFileByFolderPath=function(e,t){e=this.normalizeFolderPath(e||""),t=this.sanitizeFileName(t);var i=this.parseFolderPath(e),o=this.getFolder(i);if(!o)return null;var n=o.getFile(t);return n?n.codeBoxFile:null},e.prototype.getFileByIdentifier=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(!i)return null;var o=this.getFolder(t);if(!o)return null;var n=o.getFile(i);return n?n.codeBoxFile:null},e.prototype.getFileByPackage=function(e,t){null!==e&&(e=this.normalizePackageName(e)),t=this.sanitizeFileName(t);var i=this.getPackageFolder(e);if(!i)return null;var o=i.getFile(t);return o?o.codeBoxFile:null},e.prototype.getFilesInFolder=function(e,t){void 0===t&&(t=!1),e=this.normalizeFolderPath(e||"");var i=this.parseFolderPath(e),o=this.getFolder(i),n=new Array;if(!o)return n;for(var r=0,a=o.getFiles(t);r<a.length;r++){var s=a[r];n.push(s.codeBoxFile)}return n},e.prototype.getFilesInPackage=function(e){null!==e&&(e=this.normalizePackageName(e));var t=this.getPackageFolder(e),i=new Array;if(!t)return i;for(var o=0,n=t.getFiles();o<n.length;o++){var r=n[o];i.push(r.codeBoxFile)}return i},e.prototype.removeFileByIdentifier=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e);if(0===t.length)return!1;var i=t.pop();if(!i)return!1;var o=this.getFolder(t);if(!o)return!1;if(!o.removeFile(i))return!1;var n=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(t.length>0?t.join("/"):null,i);if(!n)return!0;var r=this.getPackageFolder(n.packageName);return null==r||r.removeFile(i),this.fileFolderAndPackageMappings.removeByFileFolderPath(t.length>0?t.join("/"):null,i),r&&r===this.defaultPackage&&0===r.getCodeViewsCount()&&0===r.getFilesCount()&&(r.detach(),this.defaultPackage=null),!0},e.prototype.removeFileByPackage=function(e,t){null!==e&&(e=this.normalizePackageName(e)),t=this.sanitizeFileName(t);var i=this.fileFolderAndPackageMappings.getFileFolderPathByPackageItem(e,t);return!!i&&this.removeFileByIdentifier(i)},e.prototype.changeFileIdentifier=function(e,t){if(e=this.normalizeFolderPath(e),""===(t=this.normalizeFolderPath(t)))return!1;if(null!==this.getFileByIdentifier(t))return!1;var i=this.getFileByIdentifier(e);if(!i)return!1;var o=this.parseFolderPath(e),n=o.pop();if(!n)return!1;var r=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(o.length>0?o.join("/"):null,n),a=(o=this.parseFolderPath(t)).pop();return!!a&&(!!this.removeFileByIdentifier(e)&&(this.addFile(a,i,o.join("/"),null!==r,r?r.packageName:null),!0))},e.prototype.changeFileDownloadLinkByIdentifier=function(e,t){e=this.normalizeFolderPath(e);var i=this.parseFolderPath(e),o=i.pop();if(!o)return!1;var n=this.getFolder(i);if(!n)return!1;var r=n.getFile(o);if(!r)return!1;r.fileButton.setDownloadLink(t);var a=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(i.length>0?i.join("/"):null,o);if(!a)return!0;var s=this.getPackageFolder(a.packageName);return!s||(!(r=s.getFile(a.fileName))||(r.fileButton.setDownloadLink(t),!0))},e.prototype.getFilePackage=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(i){var o=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(t.join("/"),i);if(o)return o.packageName}},e.prototype.removeFilePackage=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(!i)return!1;var o=this.fileFolderAndPackageMappings.getPackageItemByFileFolderPath(t.join("/"),i);if(!o)return!1;var n=this.getPackageFolder(o.packageName);return!!n&&(n.removeFile(i),this.fileFolderAndPackageMappings.removeByPackageItem(o.packageName,i),n===this.defaultPackage&&0===n.getCodeViewsCount()&&0===n.getFilesCount()&&(n.detach(),this.defaultPackage=null),!0)},e.prototype.setNoCodeViewButtonAsActive=function(){if(null!==this.activeCodeViewIdentifier){var e=this.parseFolderPath(this.activeCodeViewIdentifier),t=e.pop();if(t){var i=this.getFolder(e);if(i)null==(n=i.getCodeView(t))||n.codeViewButton.setAsInactive();var o=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(e.join("/"),t);if(o){var n,r=this.getPackageFolder(o.packageName);if(r)null==(n=r.getCodeView(t))||n.codeViewButton.setAsInactive()}}}},e.prototype.setCodeViewButtonsAsActiveByIdentifier=function(e){e=this.normalizeFolderPath(e);var t=this.parseFolderPath(e),i=t.pop();if(i){var o=this.getFolder(t);if(o){var n=o.getCodeView(i);if(n){this.setNoCodeViewButtonAsActive(),n.codeViewButton.setAsActive(),this.activeCodeViewIdentifier=e;var r=this.codeViewFolderAndPackageMappings.getPackageItemByFileFolderPath(t.join("/"),i);if(r){var a=this.getPackageFolder(r.packageName);a&&(null==(n=a.getCodeView(i))||n.codeViewButton.setAsActive())}}}}},e.prototype.openFolder=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),e=this.normalizeFolderPath(e);for(var o=this.parseFolderPath(e),n=this.rootFolder,r=0,a=o;r<a.length;r++){var s=a[r];if(t&&n.open(i),!(n=n.getFolder(s)))break}n&&n.open(i)},e.prototype.closeFolder=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),e=this.normalizeFolderPath(e);var o=this.parseFolderPath(e),n=this.getFolder(o);n&&(t?this.closeFolderAndSubfolders(n):n.close(i))},e.prototype.openPackage=function(e,t){void 0===t&&(t=!0),null!==e&&(e=this.normalizePackageName(e));var i=this.getPackageFolder(e);i&&i.open(t)},e.prototype.closePackage=function(e,t){void 0===t&&(t=!0),null!==e&&(e=this.normalizePackageName(e));var i=this.getPackageFolder(e);i&&i.close(t)},e.prototype.updateTabNavigation=function(e){this.panelOpened=e,this.rootFolder.updateTabNavigation(e),this.defaultPackage&&this.defaultPackage.updateTabNavigation(e),this.packages.forEach((function(t){return t.updateTabNavigation(e)}))},e.prototype.getFolderStructure=function(){return this.rootFolder.getFolderStructure().children},e.prototype.getPackageNames=function(){var e=new Array;return this.packages.forEach((function(t,i){return e.push(i)})),e},e.prototype.getPackageInfos=function(){var e=new Array;return this.packages.forEach((function(t,i){e.push({name:i,opened:t.isOpened()})})),e},e.prototype.getPackagesFolderPath=function(){return this.packagesFolderPath.join("/")},e.prototype.setPackagesFolderPath=function(e){e=this.normalizeFolderPath(e),this.packagesFolderPath=this.parseFolderPath(e)},e.prototype.closeFolderAndSubfolders=function(e,t){void 0===t&&(t=!0),e.close(t);for(var i=0,o=e.getFolders();i<o.length;i++){var n=o[i];this.closeFolderAndSubfolders(n,t)}},e.prototype.sortPackageFolders=function(){this.defaultPackage&&this.defaultPackage.appendTo(this.packagesContainer);var e=Array.from(this.packages);e.sort((function(e,t){return e[0]>t[0]?1:-1}));for(var t=0,i=e;t<i.length;t++){i[t][1].appendTo(this.packagesContainer)}},e.prototype.getFolder=function(e,t){void 0===t&&(t=!1);for(var o=this.panelOpened,n=this.rootFolder,r=0,a=e;r<a.length;r++){var s=a[r];n.isOpened()||(o=!1);var l=n.getFolder(s);if(!l){if(!t)return null;l=new q(s,o,this.openCloseAnimationSpeed,this.openCloseAnimationEasingFunction,this.svgSpritePath,this.folderArrowIconName,this.folderIconName,i.PROJECT_CODE_BOX_PANEL_ITEM_FOLDER_MODIFIER),n.addFolder(s,l)}n=l}return n},e.prototype.getPackageFolder=function(e,t){if(void 0===t&&(t=!1),null===e){if(!this.defaultPackage){if(!t)return null;this.getFolder(this.packagesFolderPath,!0),this.defaultPackage=new q(this.defaultPackageName,this.panelOpened,this.openCloseAnimationSpeed,this.openCloseAnimationEasingFunction,this.svgSpritePath,this.folderArrowIconName,this.packageIconName,i.PROJECT_CODE_BOX_PANEL_ITEM_DEFAULT_PACKAGE_MODIFIER,this.packagesContainer),this.sortPackageFolders()}return this.defaultPackage}var o=this.packages.get(e);if(!o){if(!t)return null;if(this.createFoldersForPackages){var n=this.packagesFolderPath.slice();if(null!==this.foldersDelimiterForPackages)for(var r=0,a=this.getPackageFolderNames(e);r<a.length;r++){var s=a[r];n.push(s)}else n.push(e);this.getFolder(n,!0)}o=new q(e,this.panelOpened,this.openCloseAnimationSpeed,this.openCloseAnimationEasingFunction,this.svgSpritePath,this.folderArrowIconName,this.packageIconName,i.PROJECT_CODE_BOX_PANEL_ITEM_PACKAGE_MODIFIER,this.packagesContainer),this.packages.set(e,o),this.sortPackageFolders()}return o},e.prototype.getFolderPath=function(e,t,i){if(null!==e)return e;if(t){if(!this.createFoldersForPackages||null===i)return this.packagesFolderPath.join("/");var o=this.packagesFolderPath.slice();if(null!==this.foldersDelimiterForPackages)for(var n=0,r=this.getPackageFolderNames(i);n<r.length;n++){var a=r[n];o.push(a)}else o.push(i);return o.join("/")}return""},e.prototype.sanitizeFileName=function(e){return e.trim().replace(/\//g,"")},e.prototype.sanitizeFolderName=function(e){return e.trim().replace(/\//g,"")},e.prototype.normalizeFolderPath=function(e){return e=(e=(e=e.trim()).replace(/^\/+|\/+$/g,"")).replace(/\/+/g,"/")},e.prototype.normalizePackageName=function(e){var t=this.foldersDelimiterForPackages;if(!this.createFoldersForPackages||null===t)return e.trim();var i=new RegExp("^\\".concat(t,"+|\\").concat(t,"+$"),"g"),o=new RegExp("\\".concat(t,"+"),"g");return e=(e=(e=(e=e.trim()).replace(/\s+/g,"")).replace(i,"")).replace(o,t)},e.prototype.parseFolderPath=function(e){var t=e.split("/");return 1===t.length&&""===t[0]?[]:t},e.prototype.getPackageFolderNames=function(e){if(!this.createFoldersForPackages)return[];if(null===this.foldersDelimiterForPackages)return[e];var t=e.split(this.foldersDelimiterForPackages);return 1===t.length&&""===t[0]?[]:t},e}();const ee=function(){function e(e,t,i,o){this.visible=!0,this.container=e,this.horizontalRule=t,this.packagesHeadingElement=i,this.packagesContainer=o}return e.prototype.show=function(){this.visible||(this.container.appendChild(this.horizontalRule),this.container.appendChild(this.packagesHeadingElement),this.container.appendChild(this.packagesContainer),this.visible=!0)},e.prototype.hide=function(){this.visible&&(this.horizontalRule.remove(),this.packagesHeadingElement.remove(),this.packagesContainer.remove(),this.visible=!1)},e.prototype.isVisible=function(){return this.visible},e}();const te=function(){function e(e,t,i,o,n,r){var a=this;this.opened=!1,this.panelElement=e,this.buttonElement=t,this.panelContentContainerElement=i,this.onToggle=r,this.openPanelAriaLabel=o,this.closePanelAriaLabel=n,this.buttonElement.setAttribute("aria-expanded","false"),this.buttonElement.setAttribute("aria-label",this.openPanelAriaLabel),this.panelContentContainerElement.setAttribute("aria-hidden","true"),this.buttonElement.addEventListener("click",(function(){return a.onButtonClick()}))}return e.prototype.open=function(){this.opened||(this.opened=!0,this.panelElement.classList.add(i.PROJECT_CODE_BOX_PANEL_OPENED_MODIFIER),this.buttonElement.classList.add(i.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON_OPENED_MODIFIER),this.buttonElement.setAttribute("aria-expanded","true"),this.buttonElement.setAttribute("aria-label",this.closePanelAriaLabel),this.panelContentContainerElement.setAttribute("aria-hidden","false"),this.onToggle())},e.prototype.close=function(){this.opened&&(this.opened=!1,this.panelElement.classList.remove(i.PROJECT_CODE_BOX_PANEL_OPENED_MODIFIER),this.buttonElement.classList.remove(i.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON_OPENED_MODIFIER),this.buttonElement.setAttribute("aria-expanded","false"),this.buttonElement.setAttribute("aria-label",this.openPanelAriaLabel),this.panelContentContainerElement.setAttribute("aria-hidden","true"),this.onToggle())},e.prototype.isOpened=function(){return this.opened},e.prototype.onButtonClick=function(){this.opened?this.close():this.open()},e}();const ie=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.panelElement=document.createElement("div"),this.panelElement.classList.add(i.PROJECT_CODE_BOX_PANEL),this.panelContentElement=document.createElement("div"),this.panelContentElement.classList.add(i.PROJECT_CODE_BOX_PANEL_CONTENT),this.panelOpenButton=document.createElement("button"),this.panelOpenButton.classList.add(i.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON);var o=document.createElement("div");o.classList.add(i.PROJECT_CODE_BOX_PANEL_OPEN_BUTTON_ICON),null!=e&&null!=t&&(o.innerHTML=k.create(e,t)),this.panelOpenButton.appendChild(o),this.folderStructureHeadingElement=document.createElement("div"),this.folderStructureHeadingElement.classList.add(i.PROJECT_CODE_BOX_PANEL_HEADING),this.folderStructureContainer=document.createElement("div"),this.folderStructureContainer.classList.add(i.PROJECT_CODE_BOX_PANEL_FOLDER_STRUCTURE_CONTAINER),this.horizontalRule=document.createElement("hr"),this.horizontalRule.classList.add(i.PROJECT_CODE_BOX_PANEL_HORIZONTAL_RULE),this.packagesHeadingElement=document.createElement("div"),this.packagesHeadingElement.classList.add(i.PROJECT_CODE_BOX_PANEL_HEADING),this.packagesContainer=document.createElement("div"),this.packagesContainer.classList.add(i.PROJECT_CODE_BOX_PANEL_PACKAGES_CONTAINER)}return e.prototype.getPanelElement=function(){return this.panelElement},e.prototype.getPanelContentElement=function(){return this.panelContentElement},e.prototype.getFolderStructureHeadingElement=function(){return this.folderStructureHeadingElement},e.prototype.getFolderStructureContainer=function(){return this.folderStructureContainer},e.prototype.getHorizontalRule=function(){return this.horizontalRule},e.prototype.getPackagesHeadingElement=function(){return this.packagesHeadingElement},e.prototype.getPackagesContainer=function(){return this.packagesContainer},e.prototype.getPanelOpenButtonElement=function(){return this.panelOpenButton},e.prototype.customizeRootElement=function(e){e.classList.add(i.PROJECT_CODE_BOX)},e.prototype.createCodeViewContainer=function(){var e=document.createElement("div");return e.classList.add(i.PROJECT_CODE_BOX_CODE_VIEW_CONTAINER),e},e.prototype.getCodeViewContainerCSSHiddenClass=function(){return i.PROJECT_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER},e.prototype.createNoCodeViewSelectedElement=function(e,t){var o=document.createElement("div");o.classList.add(i.PROJECT_CODE_BOX_NO_CODE_VIEW),o.style.height=e;var n=document.createElement("p");return n.classList.add(i.PROJECT_CODE_BOX_NO_CODE_VIEW_MESSAGE),n.innerText=t,o.appendChild(n),o},e.prototype.getNoCodeViewCSSHiddenClass=function(){return i.PROJECT_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER},e.prototype.assembleElements=function(e,t,o){var n=document.createElement("div");n.classList.add(i.PROJECT_CODE_BOX_PANEL_CONTAINER),n.appendChild(this.panelElement),this.panelElement.appendChild(this.panelOpenButton),this.panelElement.appendChild(this.panelContentElement),e.appendChild(t),e.appendChild(o),e.appendChild(n),this.panelContentElement.appendChild(this.folderStructureHeadingElement),this.panelContentElement.appendChild(this.folderStructureContainer),this.panelContentElement.appendChild(this.horizontalRule),this.panelContentElement.appendChild(this.packagesHeadingElement),this.panelContentElement.appendChild(this.packagesContainer)},e}();var oe=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oe(t,e),t.prototype.getFolderPath=function(){if(!this.codeBox)return null;var e=this.identifier.split("/");return e.pop(),e.join("/")},t.prototype.moveToFolder=function(e){if(!this.codeBox)return!1;var t=e.split("/"),i=this.getFileName();return null!==i&&(t.push(i),this.codeBox.changeCodeViewIdentifier(this.identifier,t.join("/")))},t.prototype.getFileName=function(){if(!this.codeBox)return null;var e=this.identifier.split("/").pop();return void 0===e?null:e},t.prototype.changeFileName=function(e){if(!this.codeBox)return!1;e=e.replace(/\//g,"");var t=this.identifier.split("/");return t.pop(),t.push(e),this.codeBox.changeCodeViewIdentifier(this.identifier,t.join("/"))},t.prototype.getPackage=function(){if(this.codeBox)return this.codeBox.getCodeViewPackage(this.identifier)},t.prototype.changePackage=function(e,t){return!!this.codeBox&&this.codeBox.changeCodeViewPackage(this.identifier,e,t)},t.prototype.removePackage=function(){this.codeBox&&this.codeBox.removeCodeViewPackage(this.identifier)},t}(p);var re=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return re(t,e),t.prototype.getFolderPath=function(){if(!this.codeBox)return null;var e=this.identifier.split("/");return e.pop(),e.join("/")},t.prototype.moveToFolder=function(e){if(!this.codeBox)return!1;var t=e.split("/"),i=this.getFileName();return null!==i&&(t.push(i),this.codeBox.changeFileIdentifier(this.identifier,t.join("/")))},t.prototype.getFileName=function(){if(!this.codeBox)return null;var e=this.identifier.split("/").pop();return void 0===e?null:e},t.prototype.changeFileName=function(e){if(!this.codeBox)return!1;e=e.replace(/\//g,"");var t=this.identifier.split("/");return t.pop(),t.push(e),this.codeBox.changeFileIdentifier(this.identifier,t.join("/"))},t.prototype.getPackage=function(){if(this.codeBox)return this.codeBox.getFilePackage(this.identifier)},t.prototype.changePackage=function(e,t){return!!this.codeBox&&this.codeBox.changeFilePackage(this.identifier,e,t)},t.prototype.removePackage=function(){this.codeBox&&this.codeBox.removeFilePackage(this.identifier)},t}(E);var se=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const le=function(e){function t(t,i,o,n,r,a,s,l,d,c,h){var u=e.call(this,t,i,o,n,r)||this;return u.projectCodeBoxCodeViewEntries=o,u.projectCodeBoxFileEntries=n,u.folderStructure=a,u.packages=s,u.projectName=d,u.isPanelOpened=c,u.packagesFolderPath=l,u.isRootFolderOpened=h,u}return se(t,e),t.prototype.apply=function(t){if(t instanceof he&&t.changePackagesFolderPathAndRemoveAll(this.packagesFolderPath),e.prototype.apply.call(this,t),t instanceof he){for(var i=0,o=this.folderStructure;i<o.length;i++){var n=o[i];this.createFolders(t,n)}this.createPackages(t),this.isRootFolderOpened?t.openFolder("/",!1,!1):t.closeFolder("/",!1,!1),t.setProjectName(this.projectName),this.isPanelOpened?t.openPanel():t.closePanel();for(var r=0,a=this.projectCodeBoxCodeViewEntries;r<a.length;r++){var s=a[r];void 0!==s.package&&t.changeCodeViewPackage(s.identifier,s.package,!0)}for(var l=0,d=this.projectCodeBoxFileEntries;l<d.length;l++){var c=d[l];void 0!==c.package&&t.changeFilePackage(c.identifier,c.package,!0)}}},t.prototype.applyToInherit=function(e){for(var t=0,i=this.projectCodeBoxCodeViewEntries;t<i.length;t++){var o=i[t],n=e.getCodeView(o.identifier);if(!n){var r=o.codeView.clone();r.applyMemento(o.codeViewMemento),r.removeHighlights(),e.addCodeView(o.identifier,r)}void 0!==o.package&&(n&&void 0!==n.getPackage()||e.changeCodeViewPackage(o.identifier,o.package,!0))}for(var a=0,s=this.projectCodeBoxFileEntries;a<s.length;a++){var l=s[a],d=e.getFile(l.identifier);d||e.addFile(l.identifier,l.downloadLink),void 0!==l.package&&(d&&void 0!==d.getPackage()||e.changeFilePackage(l.identifier,l.package,!0))}for(var c=0,h=this.folderStructure;c<h.length;c++){var u=h[c];this.createFolders(e,u,[],!1)}this.createPackages(e,!1),e.setProjectName(this.projectName)},t.prototype.getCodeViewHeightByIdentifier=function(e,t){for(var i=0,o=this.projectCodeBoxCodeViewEntries;i<o.length;i++){var n=o[i];if(n.identifier===e){var r=n.codeView,a=r.linesCount;return null!==t&&a<t&&(a=t),"".concat(a*r.lineHeight).concat(r.lineHeightUnit)}}return null},t.prototype.createFolders=function(e,t,i,o){if(void 0===i&&(i=[]),void 0===o&&(o=!0),0===t.children.length){var n=i.join("/")+"/"+t.value.name;return e.addFolder(n),void(o&&t.value.opened&&e.openFolder(n,!1,!1))}for(var r=0,a=t.children;r<a.length;r++){var s=a[r];i.push(t.value.name),this.createFolders(e,s,i,o),i.pop()}if(o&&t.value.opened){n=i.join("/")+"/"+t.value.name;e.openFolder(n,!1,!1)}},t.prototype.createPackages=function(e,t){void 0===t&&(t=!0);for(var i=0,o=this.packages;i<o.length;i++){var n=o[i];e.addPackage(n.name),t&&n.opened&&e.openPackage(n.name,!1)}},t}(_);var de=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ce=function(e,t,i){if(i||2===arguments.length)for(var o,n=0,r=t.length;n<r;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};const he=function(e){function t(i,n,r){void 0===n&&(n={}),void 0===r&&(r=null);var a=this,s=i.querySelectorAll("script[data-".concat(o.DATA_ATTRIBUTE_PREFIX,"-commands]")),d=new Array;s.forEach((function(e){if(null!==e.textContent)try{var t=JSON.parse(e.textContent);if(!(t instanceof Array))return;for(var i=0,o=t;i<o.length;i++){var n=o[i];d.push(n)}}catch(e){return}}));var c,h,p,f,E=new ie(n.svgSpritePath||null,n.svgSpriteIcons&&n.svgSpriteIcons.panelOpenButton||null);r?(c=r.projectName,h=r.initialPackagesFolderPath,p=r.foldersManager.isCreateFoldersForPackagesEnabled(),f=r.foldersManager.getFoldersDelimiterForPackages()):(c=n.projectName||o.DEFAULT_PROJECT_NAME,void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"ProjectName"]&&(n.projectName=i.dataset[o.DATA_ATTRIBUTE_PREFIX+"ProjectName"]||o.DEFAULT_PROJECT_NAME),h=n.packagesFolderPath||null,void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]&&(h=i.dataset[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]||null),p=void 0!==n.createFoldersForPackages?n.createFoldersForPackages:o.DEFAULT_CREATE_FOLDERS_FOR_PACKAGES,void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"CreateFoldersForPackages"]&&(p="true"===i.dataset[o.DATA_ATTRIBUTE_PREFIX+"CreateFoldersForPackages"]),f=n.foldersDelimiterForPackages||null,void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FoldersDelimiterForPackages"]&&(f=i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FoldersDelimiterForPackages"]||null));var g=void 0!==n.folderAnimationSpeed?n.folderAnimationSpeed:o.DEFAULT_FOLDER_ANIMATION_SPEED;if(void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationSpeed"]){var _=Number.parseFloat(i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationSpeed"]||"");Number.isNaN(_)||(g=_)}var I=n.folderAnimationEasingFunction||o.DEFAULT_FOLDER_ANIMATION_EASING_FUNCTION;void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationEasingFunction"]&&(I=i.dataset[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationEasingFunction"]||o.DEFAULT_FOLDER_ANIMATION_EASING_FUNCTION);var C,m=new Q(E.getFolderStructureContainer(),E.getPackagesContainer(),c,h,n.defaultPackageName||null,p,f,!1,g,I,n.svgSpritePath,t.getIconName(n,"folderArrow"),t.getIconName(n,"project"),t.getIconName(n,"folder"),t.getIconName(n,"package"),t.getIconName(n,"codeFile"),t.getIconName(n,"file"),t.getIconName(n,"download")),v=null;r?C=r.initialPackagesFolderPath:(C=n.packagesFolderPath||null,void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]&&(C=i.dataset[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]||null)),null!==C&&""===(C=m.getNormalizedFolderPath(C))&&(C=null);for(var O=0,w=d;O<w.length;O++){var T=w[O];if("object"==typeof T)if(T.command===t.COMMAND_SET_ACTIVE_CODE_VIEW){if("string"!=typeof T.identifier)continue;v=T.identifier}else if(T.command===t.COMMAND_RENAME_FOLDER&&null!==C){if("string"!=typeof T.folderPath)continue;if("string"!=typeof T.newName)continue;var A=m.getNormalizedFolderPath(T.folderPath),P=m.getSanitizedFolderName(T.newName);if((C+"/").startsWith(A+"/")){var F=A.split("/");if(""===F[0])continue;F.pop(),F.push(P);var y=F.join("/");C=C.replace(A,y)}}}var B=void 0===n.lazyInit||n.lazyInit;void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"LazyInit"]&&(B="true"===i.dataset[o.DATA_ATTRIBUTE_PREFIX+"LazyInit"]);var N=null;if(null!==v&&B){m.getNormalizedFolderPath(v);var V=n.minCodeViewLinesCount||null;if(void 0!==i.dataset[o.DATA_ATTRIBUTE_PREFIX+"MinCodeViewLinesCount"]&&(V=Number.parseInt(i.dataset[o.DATA_ATTRIBUTE_PREFIX+"MinCodeViewLinesCount"]||""),Number.isNaN(V)))throw new Error("Min code view lines count option must be a number.");for(var D=0;D<i.children.length;D++){var R=i.children[D];if(R instanceof HTMLPreElement){var k=t.getFolderPathFromDataset(R.dataset),b=t.getNameFromDataset(R.dataset)||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,M=t.getPackageNameFromDataset(R.dataset);if(m.getItemIdentifier(b,k,null!==M,""!==M?M:null)===v){var L=u.getCodeElement(R);if(!L)continue;var x=u.getLinesCount(L);null!==V&&x<V&&(x=V);var X=x*u.getCodeViewLineHeight(R,n.defaultCodeViewOptions||{});N="".concat(X).concat(u.getCodeViewLineHeightUnit(R,n.defaultCodeViewOptions||{}));break}}}null===N&&r&&(N=r.getHeightForLazyInitPlaceholderElement(v,V,n.defaultCodeViewOptions||{}))}return(a=e.call(this,i,n,E,N)||this).initialMemento=null,a.showCodeViewEventSource=new l,a.codeViewEntries=new Map,a.fileEntries=new Map,a.fillProjectCodeBoxOptionsFromDataset(n,i.dataset),a.commands=d,a.parentCodeBox=r,a.initialPackagesFolderPath=C,a.projectName=c,E.getFolderStructureHeadingElement().innerText=n.folderStructureHeading||o.DEFAULT_PROJECT_FOLDER_STRUCTURE_HEADING,E.getPackagesHeadingElement().innerText=n.packagesHeading||o.DEFAULT_PROJECT_PACKAGES_HEADING,a.panelToggle=new te(E.getPanelElement(),E.getPanelOpenButtonElement(),E.getPanelContentElement(),n.openPanelButtonAriaLabel||o.DEFAULT_OPEN_PANEL_BUTTON_ARIA_LABEL,n.closePanelButtonAriaLabel||o.DEFAULT_CLOSE_PANEL_BUTTON_ARIA_LABEL,(function(){return a.onPanelToggled()})),a.packagesSectionToggle=new ee(E.getPanelContentElement(),E.getHorizontalRule(),E.getPackagesHeadingElement(),E.getPackagesContainer()),a.foldersManager=m,(void 0===n.openRootFolderOnInit||n.openRootFolderOnInit)&&a.foldersManager.openFolder("/",!1,!1),n.openPanelOnInit&&a.panelToggle.open(),a.openActiveCodeViewFolderOnInit=void 0===n.openActiveCodeViewFolderOnInit||n.openActiveCodeViewFolderOnInit,a.openActiveCodeViewPackageOnInit=void 0===n.openActiveCodeViewPackageOnInit||n.openActiveCodeViewPackageOnInit,a.preventActiveCodeViewFolderOpenOnInitIfPackage=void 0!==n.preventActiveCodeViewFolderOpenOnInitIfPackage&&n.preventActiveCodeViewFolderOpenOnInitIfPackage,a.closePanelOnCodeViewSelect=void 0===n.closePanelOnCodeViewSelect||n.closePanelOnCodeViewSelect,a.showCodeViewEventSource.subscribe((function(e,t){return a.onShowCodeView(t)})),a}return de(t,e),t.prototype.addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(null!==this.foldersManager.getCodeViewByIdentifier(e))return!1;var i=e.split("/").pop();if(void 0===i||""===i.trim())return!1;var o=t.clone();return this._addCodeView(e,o)},t.prototype._addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(null!==this.foldersManager.getCodeViewByIdentifier(e))return!1;var i=e.split("/"),o=i.pop();if(void 0===o||""===o.trim())return!1;if(!this.foldersManager.addCodeView(o,t,this.showCodeViewEventSource,i.join("/")))return!1;e=this.foldersManager.getItemIdentifier(o,i.join("/"));var n=new f,r=new ne(e,t,this,n);return this.codeViewEntries.set(t,new U(r,n)),!0},t.prototype.getCodeViews=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.codeViewEntries.forEach((function(t){return e.push(t.codeBoxCodeView)})),e},t.prototype.getCodeViewsByFolderPath=function(e,t){if(void 0===t&&(t=!1),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);for(var i=this.foldersManager.getCodeViewsInFolder(e,t),o=new Array,n=0,r=i;n<r.length;n++){var a=r[n],s=this.codeViewEntries.get(a);s&&o.push(s.codeBoxCodeView)}return o},t.prototype.getCodeViewsByPackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);for(var t=this.foldersManager.getCodeViewsInPackage(e),i=new Array,o=0,n=t;o<n.length;o++){var r=n[o],a=this.codeViewEntries.get(r);a&&i.push(a.codeBoxCodeView)}return i},t.prototype.getCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.foldersManager.getCodeViewByIdentifier(e);if(!t)return null;var i=this.codeViewEntries.get(t);return i?i.codeBoxCodeView:null},t.prototype.getCodeViewByFolderPath=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.foldersManager.getCodeViewByFolderPath(e,t);if(!i)return null;var o=this.codeViewEntries.get(i);return o?o.codeBoxCodeView:null},t.prototype.getCodeViewByPackage=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.foldersManager.getCodeViewByPackage(e,t);if(!i)return null;var o=this.codeViewEntries.get(i);return o?o.codeBoxCodeView:null},t.prototype.removeCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.foldersManager.getCodeViewByIdentifier(e);if(!t)return!1;var i=this.codeViewEntries.get(t);return!!i&&(!!this.foldersManager.removeCodeViewByIdentifier(e)&&(this.getCurrentlyActiveCodeView()===t&&this.changeActiveCodeView(null),i.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(t),!0))},t.prototype.removeAllCodeViews=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;this.codeViewEntries.forEach((function(t){var i=t.codeBoxCodeView.getIdentifier();null!==i&&e.push(i)}));for(var t=0,i=e;t<i.length;t++){var o=i[t];this.removeCodeView(o)}},t.prototype.changeCodeViewIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(!this.foldersManager.changeCodeViewIdentifier(e,t,this.showCodeViewEventSource))return!1;var i=this.foldersManager.getCodeViewByIdentifier(t);if(!i)return!1;var o=this.codeViewEntries.get(i);return null==o||o.codeBoxCodeViewManager.changeIdentifier(t),!0},t.prototype.changeCodeViewPackage=function(e,t,i){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(null!==t&&""===t.trim())return!1;var n=this.foldersManager.getCodeViewByIdentifier(e);if(!n)return!1;var r=this.codeViewEntries.get(n);if(!r)return!1;var a=r.codeBoxCodeView.getFileName()||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,s=i?r.codeBoxCodeView.getFolderPath():null,l=this.foldersManager.getItemIdentifier(a,s,!0,""!==t?t:null);return(r.codeBoxCodeView.getIdentifier()===l||null===this.foldersManager.getCodeViewByIdentifier(l))&&(null===this.foldersManager.getCodeViewByPackage(t,a)&&(r.codeBoxCodeView.getIdentifier()===l&&this.foldersManager.removeCodeViewByIdentifier(e),!!this.foldersManager.addCodeView(a,n,this.showCodeViewEventSource,s,!0,""!==t?t:null)&&(r.codeBoxCodeView.getIdentifier()!==l&&this.foldersManager.removeCodeViewByIdentifier(e),n===this.getCurrentlyActiveCodeView()&&this.foldersManager.setCodeViewButtonsAsActiveByIdentifier(l),r.codeBoxCodeViewManager.changeIdentifier(l),this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide(),!0)))},t.prototype.removeCodeViewPackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.removeCodeViewPackage(e)},t.prototype.getCodeViewPackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getCodeViewPackage(e)},t.prototype.setActiveCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.foldersManager.getCodeViewByIdentifier(e);return!!t&&(this.foldersManager.setCodeViewButtonsAsActiveByIdentifier(e),this.changeActiveCodeView(t),!0)},t.prototype.setNoActiveCodeView=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.setNoCodeViewButtonAsActive(),this.changeActiveCodeView(null)},t.prototype.getActiveCodeView=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=this.getCurrentlyActiveCodeView();if(!e)return null;var t=this.codeViewEntries.get(e);return t?t.codeBoxCodeView:null},t.prototype.addFile=function(e,t){if(void 0===t&&(t=null),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(null!==this.foldersManager.getFileByIdentifier(e))return!1;var i=e.split("/"),o=i.pop();if(void 0===o||""===o.trim())return!1;var n=new g,r=new ae(e,t,this,n);return!!this.foldersManager.addFile(o,r,i.join("/"))&&(e=this.foldersManager.getItemIdentifier(o,i.join("/")),this.fileEntries.set(r,new z(n)),!0)},t.prototype.getFiles=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.fileEntries.forEach((function(t,i){return e.push(i)})),e},t.prototype.getFilesByFolderPath=function(e,t){if(void 0===t&&(t=!1),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFilesInFolder(e,t)},t.prototype.getFilesByPackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFilesInPackage(e)},t.prototype.getFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFileByIdentifier(e)},t.prototype.getFileByFolderPath=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFileByFolderPath(e,t)},t.prototype.getFileByPackage=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFileByPackage(e,t)},t.prototype.removeFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.foldersManager.getFileByIdentifier(e);if(!t)return!1;var i=this.fileEntries.get(t);return!!i&&(!!this.foldersManager.removeFileByIdentifier(e)&&(i.codeBoxFileManager.unlinkCodeBox(),this.fileEntries.delete(t),!0))},t.prototype.removeAllFiles=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;this.fileEntries.forEach((function(t,i){var o=i.getIdentifier();null!==o&&e.push(o)}));for(var t=0,i=e;t<i.length;t++){var o=i[t];this.removeFile(o)}},t.prototype.changeFileIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(!this.foldersManager.changeFileIdentifier(e,t))return!1;var i=this.foldersManager.getFileByIdentifier(t);if(!i)return!1;var o=this.fileEntries.get(i);return null==o||o.codeBoxFileManager.changeIdentifier(t),!0},t.prototype.changeFilePackage=function(e,t,i){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(null!==t&&""===t.trim())return!1;var n=this.foldersManager.getFileByIdentifier(e);if(!n)return!1;var r=this.fileEntries.get(n);if(!r)return!1;var a=n.getFileName()||o.DEFAULT_FILE_BUTTON_TEXT,s=i?n.getFolderPath():null,l=this.foldersManager.getItemIdentifier(a,s,!0,""!==t?t:null);return(n.getIdentifier()===l||null===this.foldersManager.getFileByIdentifier(l))&&(null===this.foldersManager.getFileByPackage(t,a)&&(n.getIdentifier()===l&&this.foldersManager.removeFileByIdentifier(e),!!this.foldersManager.addFile(a,n,s,!0,""!==t?t:null)&&(n.getIdentifier()!==l&&this.foldersManager.removeFileByIdentifier(e),r.codeBoxFileManager.changeIdentifier(l),this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide(),!0)))},t.prototype.removeFilePackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.removeFilePackage(e)},t.prototype.changeFileDownloadLink=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(!this.foldersManager.changeFileDownloadLinkByIdentifier(e,t))return!1;var i=this.foldersManager.getFileByIdentifier(e);if(!i)return!1;var o=this.fileEntries.get(i);return null==o||o.codeBoxFileManager.changeDownloadLink(t),!0},t.prototype.getFilePackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getFilePackage(e)},t.prototype.addFolder=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.addFolder(e)},t.prototype.removeFolder=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.foldersManager.getCodeViewsInFolder(e,!0),i=this.foldersManager.getFilesInFolder(e,!0);if(!this.foldersManager.removeFolder(e))return!1;for(var o=this.getCurrentlyActiveCodeView(),n=0,r=t;n<r.length;n++){var a=r[n];a===o&&this.changeActiveCodeView(null);var s=this.codeViewEntries.get(a);s&&(s.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(a))}for(var l=0,d=i;l<d.length;l++){var c=d[l],h=this.fileEntries.get(c);h&&(h.codeBoxFileManager.unlinkCodeBox(),this.fileEntries.delete(c))}return this.foldersManager.hasPackages()||this.packagesSectionToggle.hide(),!0},t.prototype.renameFolder=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.foldersManager.renameFolder(e,t);if(null===i)return!1;e=this.foldersManager.getNormalizedFolderPath(e);for(var o=0,n=this.foldersManager.getCodeViewsInFolder(i,!0);o<n.length;o++){var r=n[o],a=this.codeViewEntries.get(r);if(a)if(null!==(c=a.codeBoxCodeView.getIdentifier())){var s=c.replace(e,i);a.codeBoxCodeViewManager.changeIdentifier(s)}}for(var l=0,d=this.foldersManager.getFilesInFolder(i,!0);l<d.length;l++){var c,h=d[l],p=this.fileEntries.get(h);if(p)if(null!==(c=h.getIdentifier())){s=c.replace(e,i);p.codeBoxFileManager.changeIdentifier(s)}}return!0},t.prototype.openFolder=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!0),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.openFolder(e,t,i)},t.prototype.closeFolder=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!0),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.closeFolder(e,t,i)},t.prototype.folderExists=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.folderExists(e)},t.prototype.isFolderOpened=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.isFolderOpened(e)},t.prototype.getSubfolderNames=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getSubfolderNames(e)},t.prototype.addPackage=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.addPackage(e),this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide()},t.prototype.removePackage=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=!1),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var o=this.getCurrentlyActiveCodeView();if(this.foldersManager.isCreateFoldersForPackagesEnabled()&&t){var n=this.foldersManager.getFolderPathToRemovePackage(e);if(null!==n){if(i)if(!this.foldersManager.removePackage(e,!0))return!1;return(E=this.removeFolder(n))&&(this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide()),E}for(var r=this.foldersManager.getCodeViewsInPackage(e),a=this.foldersManager.getFilesInPackage(e),s=0,l=r;s<l.length;s++){var d=l[s];if(I=this.codeViewEntries.get(d))null!==(p=I.codeBoxCodeView.getIdentifier())&&(this.foldersManager.removeCodeViewByIdentifier(p),I.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(d),d===o&&this.changeActiveCodeView(null))}for(var c=0,h=a;c<h.length;c++){var p,f=h[c];if(v=this.fileEntries.get(f))null!==(p=f.getIdentifier())&&(this.foldersManager.removeFileByIdentifier(p),v.codeBoxFileManager.unlinkCodeBox(),this.fileEntries.delete(f))}return(E=this.foldersManager.removePackage(e,i))&&(this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide()),E}if(i){var E;r=this.foldersManager.getCodeViewsInPackage(e),a=this.foldersManager.getFilesInPackage(e);if(!(E=this.foldersManager.removePackage(e,!0)))return!1;for(var g=0,_=r;g<_.length;g++){var I;d=_[g];null==(I=this.codeViewEntries.get(d))||I.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(d),d===o&&this.changeActiveCodeView(null)}for(var C=0,m=a;C<m.length;C++){var v;f=m[C];null==(v=this.fileEntries.get(f))||v.codeBoxFileManager.unlinkCodeBox(),this.fileEntries.delete(f)}return this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide(),!0}return(E=this.foldersManager.removePackage(e))&&(this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide()),E},t.prototype.renamePackage=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(!this.foldersManager.packageExists(e))return!1;if(this.foldersManager.packageExists(t))return!1;var i=this.foldersManager.getCodeViewsInPackage(e),o=this.foldersManager.getFilesInPackage(e),n=this.foldersManager.getPackageFolderPath(e);if(!this.foldersManager.addPackage(t))return!1;this.foldersManager.isPackageFolderOpened(e)&&this.foldersManager.openPackage(t,!1);for(var r=0,a=i;r<a.length;r++){var s=a[r],l=this.codeViewEntries.get(s);l&&l.codeBoxCodeView.changePackage(t,l.codeBoxCodeView.getFolderPath()!==n)}for(var d=0,c=o;d<c.length;d++){var h=c[d];h.changePackage(t,h.getFolderPath()!==n)}return this.removePackage(e,!0),!0},t.prototype.openPackage=function(e,t){if(void 0===t&&(t=!0),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.openPackage(e,t)},t.prototype.closePackage=function(e,t){if(void 0===t&&(t=!0),!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.foldersManager.closePackage(e,t)},t.prototype.packageExists=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.packageExists(e)},t.prototype.isPackageOpened=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.isPackageFolderOpened(e)},t.prototype.getPackages=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getPackageNames()},t.prototype.getPackagesFolderPath=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.foldersManager.getPackagesFolderPath()},t.prototype.changePackagesFolderPathAndRemoveAll=function(e){this.removeAllCodeViews(),this.removeAllFiles();var t=this.getSubfolderNames("/");if(t)for(var i=0,o=t;i<o.length;i++){var n=o[i];this.removeFolder(n)}for(var r=0,a=this.getPackages();r<a.length;r++){var s=a[r];this.removePackage(s,!1,!1)}this.foldersManager.setPackagesFolderPath(e)},t.prototype.getProjectName=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.projectName},t.prototype.setProjectName=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.projectName=e,this.foldersManager.setRootFolderName(this.projectName)},t.prototype.openPanel=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.panelToggle.open()},t.prototype.closePanel=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.panelToggle.close()},t.prototype.isPanelOpened=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.panelToggle.isOpened()},t.prototype.reset=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.initialMemento&&this.applyMemento(this.initialMemento)},t.prototype.createMemento=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);return this.createProjectCodeBoxMemento()},t.prototype.applyMemento=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);e.apply(this)},t.prototype.onInit=function(e){for(var i=0,n=e;i<n.length;i++){var r=n[i];if("CodeViewInfo"===r.type&&r.codeViewInfo){var a=r.codeViewInfo,s=t.getFolderPathFromDataset(a.dataset),l=t.getNameFromDataset(a.dataset)||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,d=t.getPackageNameFromDataset(a.dataset),c=void 0!==a.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"],h=this.foldersManager.getItemIdentifier(l,s,null!==d,""!==d?d:null);if(!this.foldersManager.addCodeView(l,a.codeView,this.showCodeViewEventSource,s,null!==d,""!==d?d:null)){if(!c)continue;var u=this.foldersManager.getCodeViewByIdentifier(h);this.foldersManager.removeCodeViewByIdentifier(h)||null===d||(u=this.foldersManager.getCodeViewByPackage(""!==d?d:null,l),this.foldersManager.removeCodeViewByPackage(""!==d?d:null,l)),u&&this.codeViewEntries.delete(u),this.foldersManager.addCodeView(l,a.codeView,this.showCodeViewEventSource,s,null!==d,""!==d?d:null)}var p=new f,E=new ne(h,a.codeView,this,p);this.codeViewEntries.set(a.codeView,new U(E,p)),c&&this.foldersManager.setCodeViewButtonsAsActiveByIdentifier(h)}else if("FileInfo"===r.type&&r.fileInfo){var _=r.fileInfo,I=(s=t.getFolderPathFromDataset(_.dataset),l=t.getNameFromDataset(_.dataset)||o.DEFAULT_FILE_BUTTON_TEXT,d=t.getPackageNameFromDataset(_.dataset),h=this.foldersManager.getItemIdentifier(l,s,null!==d,""!==d?d:null),new g),C=new ae(h,_.downloadLink,this,I);if(!this.foldersManager.addFile(l,C,s,null!==d,""!==d?d:null))continue;this.fileEntries.set(C,new z(I))}else if("HTMLElement"===r.type&&r.element){var m=r.element;void 0!==m.dataset[o.DATA_ATTRIBUTE_PREFIX+"Folders"]&&this.createFolderStructure(m)}}this.foldersManager.hasPackages()?this.packagesSectionToggle.show():this.packagesSectionToggle.hide()},t.prototype.onAfterInit=function(){if(this.parentCodeBox&&(this.parentCodeBox.isInitialized()||this.parentCodeBox.init(),this.parentCodeBox.initialMemento&&this.parentCodeBox.initialMemento.applyToInherit(this)),null!==this.commands){this.processCommands(this.commands),this.commands=null;var e=this.getCurrentlyActiveCodeView();if(e){var t=this.codeViewEntries.get(e);if(t){var i=t.codeBoxCodeView.getPackage();if(this.openActiveCodeViewFolderOnInit&&(void 0===i||!this.preventActiveCodeViewFolderOpenOnInitIfPackage)){var o=(t.codeBoxCodeView.getIdentifier()||"").split("/");o.pop(),this.foldersManager.openFolder(o.join("/"),!0,!1)}this.openActiveCodeViewPackageOnInit&&void 0!==i&&this.foldersManager.openPackage(i,!1)}}this.initialMemento=this.createProjectCodeBoxMemento()}},t.prototype.createProjectCodeBoxMemento=function(){var e=this,t=new Array,i=new Array;return this.codeViewEntries.forEach((function(e,i){var o=e.codeBoxCodeView.getIdentifier();null!==o&&t.push({codeView:i,codeViewMemento:i.createMemento(),identifier:o,package:e.codeBoxCodeView.getPackage()})})),this.fileEntries.forEach((function(e,t){var o=t.getIdentifier();null!==o&&i.push({downloadLink:t.getDownloadLink(),identifier:o,package:t.getPackage()})})),new le(this,(function(t,i){return e._addCodeView(t,i)}),t,i,this.getCurrentlyActiveCodeView(),this.foldersManager.getFolderStructure(),this.foldersManager.getPackageInfos(),this.foldersManager.getPackagesFolderPath(),this.getProjectName(),this.isPanelOpened(),this.isFolderOpened("/"))},t.prototype.onShowCodeView=function(e){this.changeActiveCodeView(e),this.closePanelOnCodeViewSelect&&this.panelToggle.close();var t=this.codeViewEntries.get(e);if(t){var i=t.codeBoxCodeView.getIdentifier();null!==i&&this.foldersManager.setCodeViewButtonsAsActiveByIdentifier(i)}},t.prototype.onPanelToggled=function(){this.foldersManager.updateTabNavigation(this.panelToggle.isOpened())},t.prototype.createFolderStructure=function(e,t){void 0===t&&(t=[]);for(var i=function(i){var r=e.children[i];if(!(r instanceof HTMLElement))return"continue";var a=null,s=null;if(r.childNodes.forEach((function(e){var t;if(e instanceof Text){var i=null===(t=e.textContent)||void 0===t?void 0:t.trim();i&&i.length>0&&(a=i)}else e instanceof HTMLElement&&(s=e)})),a){var l=ce(ce([],t,!0),[a],!1),d=l.join("/");n.foldersManager.addFolder(d),void 0!==r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Opened"]&&n.foldersManager.openFolder(d,!1,!1),s&&n.createFolderStructure(s,l)}},n=this,r=0;r<e.children.length;r++)i(r)},t.prototype.processCommands=function(e){for(var i=0,o=e;i<o.length;i++){var n=o[i];if("object"==typeof n)switch(n.command){case t.COMMAND_RENAME_PROJECT:this.processRenameProjectCommand(n);break;case t.COMMAND_ADD_FOLDER:this.processAddFolderCommand(n);break;case t.COMMAND_REMOVE_FOLDER:this.processRemoveFolderCommand(n);break;case t.COMMAND_RENAME_FOLDER:this.processRenameFolderCommand(n);break;case t.COMMAND_OPEN_FOLDER:this.processOpenFolderCommand(n);break;case t.COMMAND_CLOSE_FOLDER:this.processCloseFolderCommand(n);break;case t.COMMAND_ADD_PACKAGE:this.processAddPackageCommand(n);break;case t.COMMAND_REMOVE_PACKAGE:this.processRemovePackageCommand(n);break;case t.COMMAND_RENAME_PACKAGE:this.processRenamePackageCommand(n);break;case t.COMMAND_OPEN_PACKAGE:this.processOpenPackageCommand(n);break;case t.COMMAND_CLOSE_PACKAGE:this.processClosePackageCommand(n);break;case t.COMMAND_REMOVE_CODE_VIEW:this.processRemoveCodeViewCommand(n);break;case t.COMMAND_RENAME_CODE_VIEW:this.processRenameCodeViewCommand(n);break;case t.COMMAND_MOVE_CODE_VIEW_TO_FOLDER:this.processMoveCodeViewToFolderCommand(n);break;case t.COMMAND_CHANGE_CODE_VIEW_PACKAGE:this.processChangeCodeViewPackageCommand(n);break;case t.COMMAND_REMOVE_CODE_VIEW_PACKAGE:this.processRemoveCodeViewPackageCommand(n);break;case t.COMMAND_REMOVE_ALL_CODE_VIEWS:this.removeAllCodeViews();break;case t.COMMAND_ADD_CODE_VIEW_HIGHLIGHT:this.processAddCodeViewHighlightCommand(n);break;case t.COMMAND_REMOVE_CODE_VIEW_HIGHLIGHT:this.processRemoveCodeViewHighlightCommand(n);break;case t.COMMAND_SET_ACTIVE_CODE_VIEW:this.processSetActiveCodeViewCommand(n);break;case t.COMMAND_SET_NO_ACTIVE_CODE_VIEW:this.setNoActiveCodeView();break;case t.COMMAND_REMOVE_FILE:this.processRemoveFileCommand(n);break;case t.COMMAND_RENAME_FILE:this.processRenameFileCommand(n);break;case t.COMMAND_MOVE_FILE_TO_FOLDER:this.processMoveFileToFolderCommand(n);break;case t.COMMAND_CHANGE_FILE_PACKAGE:this.processChangeFilePackageCommand(n);break;case t.COMMAND_REMOVE_FILE_PACKAGE:this.processRemoveFilePackageCommand(n);break;case t.COMMAND_REMOVE_ALL_FILES:this.removeAllFiles()}}},t.prototype.processRenameProjectCommand=function(e){"string"==typeof e.name&&this.setProjectName(e.name)},t.prototype.processAddFolderCommand=function(e){"string"==typeof e.folderPath&&this.addFolder(e.folderPath)},t.prototype.processRemoveFolderCommand=function(e){"string"==typeof e.folderPath&&this.removeFolder(e.folderPath)},t.prototype.processRenameFolderCommand=function(e){"string"==typeof e.folderPath&&"string"==typeof e.newName&&this.renameFolder(e.folderPath,e.newName)},t.prototype.processOpenFolderCommand=function(e){if("string"==typeof e.folderPath&&(void 0===e.openParentFolders||"boolean"==typeof e.openParentFolders)){var t=void 0!==e.openParentFolders&&e.openParentFolders;this.openFolder(e.folderPath,t,!1)}},t.prototype.processCloseFolderCommand=function(e){if("string"==typeof e.folderPath&&(void 0===e.closeChildFolders||"boolean"==typeof e.closeChildFolders)){var t=void 0!==e.closeChildFolders&&e.closeChildFolders;this.closeFolder(e.folderPath,t)}},t.prototype.processAddPackageCommand=function(e){"string"==typeof e.name&&this.addPackage(e.name)},t.prototype.processRemovePackageCommand=function(e){if("string"==typeof e.name&&!(void 0!==e.removePackageFoldersAndContents&&"boolean"!=typeof e.removePackageFoldersAndContents||void 0!==e.removeAllCodeViewsAndFiles&&"boolean"!=typeof e.removeAllCodeViewsAndFiles)){var t=void 0===e.removePackageFoldersAndContents||e.removePackageFoldersAndContents,i=void 0!==e.removeAllCodeViewsAndFiles&&e.removeAllCodeViewsAndFiles;this.removePackage(e.name,t,i)}},t.prototype.processRenamePackageCommand=function(e){"string"==typeof e.name&&"string"==typeof e.newName&&this.renamePackage(e.name,e.newName)},t.prototype.processOpenPackageCommand=function(e){if("string"==typeof e.name||null===e.name||void 0===e.name){var t=void 0===e.name?null:e.name;this.openPackage(t,!1)}},t.prototype.processClosePackageCommand=function(e){if("string"==typeof e.name||null===e.name||void 0===e.name){var t=void 0===e.name?null:e.name;this.closePackage(t,!1)}},t.prototype.processRemoveCodeViewCommand=function(e){"string"==typeof e.identifier&&this.removeCodeView(e.identifier)},t.prototype.processRenameCodeViewCommand=function(e){if("string"==typeof e.identifier&&"string"==typeof e.newName){var t=this.foldersManager.getCodeViewByIdentifier(e.identifier);if(t){var i=this.codeViewEntries.get(t);i&&i.codeBoxCodeView.changeFileName(e.newName)}}},t.prototype.processMoveCodeViewToFolderCommand=function(e){if("string"==typeof e.identifier&&"string"==typeof e.folderPath){var t=this.foldersManager.getCodeViewByIdentifier(e.identifier);if(t){var i=this.codeViewEntries.get(t);i&&i.codeBoxCodeView.moveToFolder(e.folderPath)}}},t.prototype.processChangeCodeViewPackageCommand=function(e){if("string"==typeof e.identifier&&"boolean"==typeof e.keepFolderPath&&("string"==typeof e.packageName||null===e.packageName||void 0===e.packageName)){var t=void 0===e.packageName?null:e.packageName;this.changeCodeViewPackage(e.identifier,t,e.keepFolderPath)}},t.prototype.processRemoveCodeViewPackageCommand=function(e){"string"==typeof e.identifier&&this.removeCodeViewPackage(e.identifier)},t.prototype.processAddCodeViewHighlightCommand=function(e){if("string"==typeof e.identifier&&"number"==typeof e.start&&("number"==typeof e.end||void 0===e.end)){var t=this.foldersManager.getCodeViewByIdentifier(e.identifier);if(t){var i=this.codeViewEntries.get(t);i&&(void 0!==e.end?i.codeBoxCodeView.addHighlight(e.start,e.end):i.codeBoxCodeView.addHighlight(e.start))}}},t.prototype.processRemoveCodeViewHighlightCommand=function(e){if("string"==typeof e.identifier&&!("number"!=typeof e.start&&void 0!==e.start||"number"!=typeof e.end&&void 0!==e.end)){var t=this.foldersManager.getCodeViewByIdentifier(e.identifier);if(t){var i=this.codeViewEntries.get(t);i&&(void 0!==e.start&&void 0!==e.end?i.codeBoxCodeView.removeHighlights(e.start,e.end):void 0!==e.start?i.codeBoxCodeView.removeHighlights(e.start):i.codeBoxCodeView.removeHighlights())}}},t.prototype.processSetActiveCodeViewCommand=function(e){"string"==typeof e.identifier&&this.setActiveCodeView(e.identifier)},t.prototype.processRemoveFileCommand=function(e){"string"==typeof e.identifier&&this.removeFile(e.identifier)},t.prototype.processRenameFileCommand=function(e){if("string"==typeof e.identifier&&"string"==typeof e.newName){var t=this.foldersManager.getFileByIdentifier(e.identifier);t&&t.changeFileName(e.newName)}},t.prototype.processMoveFileToFolderCommand=function(e){if("string"==typeof e.identifier&&"string"==typeof e.folderPath){var t=this.foldersManager.getFileByIdentifier(e.identifier);t&&t.moveToFolder(e.folderPath)}},t.prototype.processChangeFilePackageCommand=function(e){if("string"==typeof e.identifier&&"boolean"==typeof e.keepFolderPath&&("string"==typeof e.packageName||null===e.packageName||void 0===e.packageName)){var t=void 0===e.packageName?null:e.packageName;this.changeFilePackage(e.identifier,t,e.keepFolderPath)}},t.prototype.processRemoveFilePackageCommand=function(e){"string"==typeof e.identifier&&this.removeFilePackage(e.identifier)},t.prototype.getHeightForLazyInitPlaceholderElement=function(e,i,n){if(this.isInitialized())return this.initialMemento?this.initialMemento.getCodeViewHeightByIdentifier(e,i):null;var r=this.getPreElementsBeforeInitialization();if(null===r)return null;for(var a=0,s=r;a<s.length;a++){var l=s[a],d=t.getFolderPathFromDataset(l.dataset),c=t.getNameFromDataset(l.dataset)||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,h=t.getPackageNameFromDataset(l.dataset);if(this.foldersManager.getItemIdentifier(c,d,null!==h,""!==h?h:null)===e){var p=u.getCodeElement(l);if(!p)continue;var f=u.getLinesCount(p);null!==i&&f<i&&(f=i);var E=f*u.getCodeViewLineHeight(l,n);return"".concat(E).concat(u.getCodeViewLineHeightUnit(l,n))}}return this.parentCodeBox?this.parentCodeBox.getHeightForLazyInitPlaceholderElement(e,i,n):null},t.getFolderPathFromDataset=function(e){return e[o.DATA_ATTRIBUTE_PREFIX+"Folder"]||null},t.getNameFromDataset=function(e){return e[o.DATA_ATTRIBUTE_PREFIX+"Name"]||null},t.getPackageNameFromDataset=function(e){var t=e[o.DATA_ATTRIBUTE_PREFIX+"Package"];return void 0!==t?t:null},t.getIconName=function(e,t){return e.svgSpriteIcons&&e.svgSpriteIcons[t]||null},t.prototype.fillProjectCodeBoxOptionsFromDataset=function(e,t){if(void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"FolderStructureHeading"]&&(e.folderStructureHeading=t[o.DATA_ATTRIBUTE_PREFIX+"FolderStructureHeading"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"PackagesHeading"]&&(e.packagesHeading=t[o.DATA_ATTRIBUTE_PREFIX+"PackagesHeading"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ProjectName"]&&(e.projectName=t[o.DATA_ATTRIBUTE_PREFIX+"ProjectName"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]&&(e.packagesFolderPath=t[o.DATA_ATTRIBUTE_PREFIX+"PackagesFolderPath"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"DefaultPackageName"]&&(e.defaultPackageName=t[o.DATA_ATTRIBUTE_PREFIX+"DefaultPackageName"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"CreateFoldersForPackages"]&&(e.createFoldersForPackages="true"===t[o.DATA_ATTRIBUTE_PREFIX+"CreateFoldersForPackages"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"FoldersDelimiterForPackages"]&&(e.foldersDelimiterForPackages=t[o.DATA_ATTRIBUTE_PREFIX+"FoldersDelimiterForPackages"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationSpeed"]&&(e.folderAnimationSpeed=Number.parseFloat(t[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationSpeed"]||""),Number.isNaN(e.folderAnimationSpeed)))throw new Error("Folder animation speed option must be a number.");void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationEasingFunction"]&&(e.folderAnimationEasingFunction=t[o.DATA_ATTRIBUTE_PREFIX+"FolderAnimationEasingFunction"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"OpenActiveCodeViewFolderOnInit"]&&(e.openActiveCodeViewFolderOnInit="true"===t[o.DATA_ATTRIBUTE_PREFIX+"OpenActiveCodeViewFolderOnInit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"OpenActiveCodeViewPackageOnInit"]&&(e.openActiveCodeViewPackageOnInit="true"===t[o.DATA_ATTRIBUTE_PREFIX+"OpenActiveCodeViewPackageOnInit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"PreventActiveCodeViewFolderOpenOnInitIfPackage"]&&(e.preventActiveCodeViewFolderOpenOnInitIfPackage="true"===t[o.DATA_ATTRIBUTE_PREFIX+"PreventActiveCodeViewFolderOpenOnInitIfPackage"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"OpenRootFolderOnInit"]&&(e.openRootFolderOnInit="true"===t[o.DATA_ATTRIBUTE_PREFIX+"OpenRootFolderOnInit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"OpenPanelOnInit"]&&(e.openPanelOnInit="true"===t[o.DATA_ATTRIBUTE_PREFIX+"OpenPanelOnInit"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ClosePanelOnCodeViewSelected"]&&(e.closePanelOnCodeViewSelect="true"===t[o.DATA_ATTRIBUTE_PREFIX+"ClosePanelOnCodeViewSelected"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"OpenPanelButtonAriaLabel"]&&(e.openPanelButtonAriaLabel=t[o.DATA_ATTRIBUTE_PREFIX+"OpenPanelButtonAriaLabel"]),void 0!==t[o.DATA_ATTRIBUTE_PREFIX+"ClosePanelButtonAriaLabel"]&&(e.closePanelButtonAriaLabel=t[o.DATA_ATTRIBUTE_PREFIX+"ClosePanelButtonAriaLabel"])},t.COMMAND_RENAME_PROJECT="rename project",t.COMMAND_ADD_FOLDER="add folder",t.COMMAND_REMOVE_FOLDER="remove folder",t.COMMAND_RENAME_FOLDER="rename folder",t.COMMAND_OPEN_FOLDER="open folder",t.COMMAND_CLOSE_FOLDER="close folder",t.COMMAND_ADD_PACKAGE="add package",t.COMMAND_REMOVE_PACKAGE="remove package",t.COMMAND_RENAME_PACKAGE="rename package",t.COMMAND_OPEN_PACKAGE="open package",t.COMMAND_CLOSE_PACKAGE="close package",t.COMMAND_REMOVE_CODE_VIEW="remove code view",t.COMMAND_RENAME_CODE_VIEW="rename code view",t.COMMAND_MOVE_CODE_VIEW_TO_FOLDER="move code view to folder",t.COMMAND_CHANGE_CODE_VIEW_PACKAGE="change code view package",t.COMMAND_REMOVE_CODE_VIEW_PACKAGE="remove code view package",t.COMMAND_REMOVE_ALL_CODE_VIEWS="remove all code views",t.COMMAND_ADD_CODE_VIEW_HIGHLIGHT="add code view highlight",t.COMMAND_REMOVE_CODE_VIEW_HIGHLIGHT="remove code view highlight",t.COMMAND_SET_ACTIVE_CODE_VIEW="set active code view",t.COMMAND_SET_NO_ACTIVE_CODE_VIEW="set no active code view",t.COMMAND_REMOVE_FILE="remove file",t.COMMAND_RENAME_FILE="rename file",t.COMMAND_MOVE_FILE_TO_FOLDER="move file to folder",t.COMMAND_CHANGE_FILE_PACKAGE="change file package",t.COMMAND_REMOVE_FILE_PACKAGE="remove file package",t.COMMAND_REMOVE_ALL_FILES="remove all files",t}(u);const ue=function(e,t,i){this.codeBoxCodeView=e,this.codeView=t,this.codeBoxCodeViewManager=i};const pe=function(e,t){this.codeBoxFile=e,this.codeBoxFileManager=t};const fe=function(){function e(){}return e.prototype.customizeRootElement=function(e){e.classList.add(i.VIRTUAL_CODE_BOX)},e.prototype.createCodeViewContainer=function(){var e=document.createElement("div");return e.classList.add(i.VIRTUAL_CODE_BOX_CODE_VIEW_CONTAINER),e},e.prototype.getCodeViewContainerCSSHiddenClass=function(){return i.VIRTUAL_CODE_BOX_CODE_VIEW_CONTAINER_HIDDEN_MODIFIER},e.prototype.createNoCodeViewSelectedElement=function(e,t){var o=document.createElement("div");o.classList.add(i.VIRTUAL_CODE_BOX_NO_CODE_VIEW),o.style.height=e;var n=document.createElement("p");return n.classList.add(i.VIRTUAL_CODE_BOX_NO_CODE_VIEW_MESSAGE),n.innerText=t,o.appendChild(n),o},e.prototype.getNoCodeViewCSSHiddenClass=function(){return i.VIRTUAL_CODE_BOX_NO_CODE_VIEW_HIDDEN_MODIFIER},e.prototype.assembleElements=function(e,t,i){e.appendChild(t),e.appendChild(i)},e}();var Ee=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const ge=function(e){function t(t,i){void 0===i&&(i={});var o=e.call(this,t,i,new fe)||this;return o.initialMemento=null,o.codeViewEntries=new Map,o.fileEntries=new Map,o.activeCodeBoxCodeView=null,o}return Ee(t,e),t.prototype.addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.codeViewEntries.has(e))return!1;var i=t.clone();return this._addCodeView(e,i)},t.prototype._addCodeView=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.codeViewEntries.has(e))return!1;var i=new f,o=new p(e,t,this,i);return this.codeViewEntries.set(e,new ue(o,t,i)),!0},t.prototype.getCodeViews=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.codeViewEntries.forEach((function(t){return e.push(t.codeBoxCodeView)})),e},t.prototype.getCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViewEntries.get(e);return t?t.codeBoxCodeView:null},t.prototype.removeCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViewEntries.get(e);return!!t&&(this.getCurrentlyActiveCodeView()===t.codeView&&this.setNoActiveCodeView(),t.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(e),!0)},t.prototype.removeAllCodeViews=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.codeViewEntries.forEach((function(e){return e.codeBoxCodeViewManager.unlinkCodeBox()})),this.codeViewEntries.clear(),this.setNoActiveCodeView()},t.prototype.changeCodeViewIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.codeViewEntries.get(e);return!!i&&(!this.codeViewEntries.has(t)&&(i.codeBoxCodeViewManager.changeIdentifier(t),this.codeViewEntries.delete(e),this.codeViewEntries.set(t,i),!0))},t.prototype.setActiveCodeView=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.codeViewEntries.get(e);return!!t&&(this.changeActiveCodeView(t.codeView),this.activeCodeBoxCodeView=t.codeBoxCodeView,!0)},t.prototype.setNoActiveCodeView=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.changeActiveCodeView(null),this.activeCodeBoxCodeView=null},t.prototype.getActiveCodeView=function(){return this.activeCodeBoxCodeView},t.prototype.addFile=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);if(this.fileEntries.has(e))return!1;var i=new g,o=new E(e,t,this,i);return this.fileEntries.set(e,new pe(o,i)),!0},t.prototype.getFiles=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var e=new Array;return this.fileEntries.forEach((function(t){return e.push(t.codeBoxFile)})),e},t.prototype.getFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.fileEntries.get(e);return t?t.codeBoxFile:null},t.prototype.removeFile=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=this.fileEntries.get(e);return!!t&&(t.codeBoxFileManager.unlinkCodeBox(),this.fileEntries.delete(e),!0)},t.prototype.removeAllFiles=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.fileEntries.forEach((function(e){return e.codeBoxFileManager.unlinkCodeBox()})),this.fileEntries.clear()},t.prototype.changeFileIdentifier=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.fileEntries.get(e);return!!i&&(!this.fileEntries.has(t)&&(i.codeBoxFileManager.changeIdentifier(t),this.fileEntries.delete(e),this.fileEntries.set(t,i),!0))},t.prototype.changeFileDownloadLink=function(e,t){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var i=this.fileEntries.get(e);return!!i&&(i.codeBoxFileManager.changeDownloadLink(t),!0)},t.prototype.reset=function(){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);this.initialMemento&&this.applyMemento(this.initialMemento)},t.prototype.createMemento=function(){var e=this;if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);var t=new Array,i=new Array;return this.codeViewEntries.forEach((function(e,i){t.push({codeView:e.codeView,codeViewMemento:e.codeView.createMemento(),identifier:i})})),this.fileEntries.forEach((function(e,t){i.push({downloadLink:e.codeBoxFile.getDownloadLink(),identifier:t})})),new _(this,(function(t,i){return e._addCodeView(t,i)}),t,i,this.getCurrentlyActiveCodeView())},t.prototype.applyMemento=function(e){if(!this.isInitialized())throw new Error(u.CODE_BOX_NOT_INITIALIZED_ERROR);e.apply(this)},t.prototype.onInit=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if("CodeViewInfo"===n.type&&n.codeViewInfo){var r=n.codeViewInfo,a=r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Name"]||o.DEFAULT_CODE_VIEW_BUTTON_TEXT,s=void 0!==r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Active"];if(this.codeViewEntries.has(a)){if(!s)continue;var l=this.codeViewEntries.get(a);l&&l.codeBoxCodeViewManager.unlinkCodeBox(),this.codeViewEntries.delete(a)}var d=new f,c=new p(a,r.codeView,this,d);this.codeViewEntries.set(a,new ue(c,r.codeView,d))}else if("FileInfo"===n.type&&n.fileInfo){var h=n.fileInfo;a=h.name;if(this.fileEntries.has(a))continue;var u=new g,_=new E(a,h.downloadLink,this,u);this.fileEntries.set(a,new pe(_,u))}}},t.prototype.onAfterInit=function(){this.initialMemento=this.createMemento()},t}(u);const _e=function(){function e(e){this.createdCodeBoxes=new Map,this.defaultCodeBoxOptions=this.createCodeBoxOptionsCopy(e)}return e.prototype.create=function(e,t){var i=this;void 0===t&&(t=this.defaultCodeBoxOptions);var o=document.querySelectorAll(e),n=0;o.forEach((function(e){if(e instanceof HTMLElement&&!i.createdCodeBoxes.has(e))try{var o=i.createCodeBox(e,t);if(!o)return;i.createdCodeBoxes.set(e,o),n++}catch(e){console.error(e)}}));for(var r=0,a=this.getAdditionallyCreatedCodeBoxes(t);r<a.length;r++){var s=a[r];this.createdCodeBoxes.set(s.rootElement,s.codeBox),n++}return n},e.prototype.getCreatedCodeBoxes=function(){var e=new Array;return this.createdCodeBoxes.forEach((function(t,i){e.push({codeBox:t,rootElementDataset:i.dataset})})),e},e.prototype.getCreatedCodeBoxesCount=function(){return this.createdCodeBoxes.size},e.prototype.getAdditionallyCreatedCodeBoxes=function(e){return[]},e}();const Ie=function(){function e(e){void 0===e&&(e={}),this.createdCodeViews=new Map,this.createdCodeViewsById=new Map,this.defaultCodeViewOptions=r(e)}return e.prototype.create=function(e,t){var i=this;void 0===t&&(t=this.defaultCodeViewOptions);var n=document.querySelectorAll(e),r=0;return n.forEach((function(e){if(e instanceof HTMLPreElement&&!i.createdCodeViews.has(e))try{var n=new c(e,t);i.createdCodeViews.set(e,n);var a=e.dataset[o.DATA_ATTRIBUTE_PREFIX+"Id"];void 0===a||i.createdCodeViewsById.has(a)||i.createdCodeViewsById.set(a,n),r++}catch(e){console.error(e)}})),r},e.prototype.getCreatedCodeViewById=function(e){return this.createdCodeViewsById.get(e)||null},e.prototype.getCreatedCodeViews=function(){var e=new Array;return this.createdCodeViews.forEach((function(t,i){e.push({codeView:t,preElementDataset:i.dataset})})),e},e.prototype.getCreatedCodeViewsCount=function(){return this.createdCodeViews.size},e}();var Ce=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const me=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.createdCodeBoxesById=new Map,i}return Ce(t,e),t.prototype.getCreatedCodeBoxById=function(e){return this.createdCodeBoxesById.get(e)||null},t.prototype.createCodeBox=function(e,t){try{var i=new S(e,t),n=e.dataset[o.DATA_ATTRIBUTE_PREFIX+"Id"];return void 0===n||this.createdCodeBoxesById.has(n)||this.createdCodeBoxesById.set(n,i),i}catch(e){return console.error(e),null}},t.prototype.createCodeBoxOptionsCopy=function(e){return{lazyInit:(t=e).lazyInit,implicitActive:t.implicitActive,defaultCodeViewOptions:t.defaultCodeViewOptions&&r(t.defaultCodeViewOptions),noCodeViewSelectedElementHeight:t.noCodeViewSelectedElementHeight,noCodeViewSelectedText:t.noCodeViewSelectedText,minCodeViewLinesCount:t.minCodeViewLinesCount,svgSpritePath:t.svgSpritePath,svgSpriteIcons:t.svgSpriteIcons&&{codeFile:t.svgSpriteIcons.codeFile,file:t.svgSpriteIcons.file,download:t.svgSpriteIcons.download}};var t},t}(_e);var ve=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const Oe=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.createdCodeBoxesById=new Map,i.postponedCodeBoxElements=[],i}return ve(t,e),t.prototype.getCreatedCodeBoxById=function(e){return this.createdCodeBoxesById.get(e)||null},t.prototype.createCodeBox=function(e,t){var i=e.dataset[o.DATA_ATTRIBUTE_PREFIX+"Extends"],n=null;if(void 0!==i&&null===(n=this.createdCodeBoxesById.get(i)||null))return this.postponedCodeBoxElements.push(e),null;try{var r=new he(e,t,n),a=e.dataset[o.DATA_ATTRIBUTE_PREFIX+"Id"];return void 0===a||this.createdCodeBoxesById.has(a)||this.createdCodeBoxesById.set(a,r),r}catch(e){return console.error(e),null}},t.prototype.getAdditionallyCreatedCodeBoxes=function(e){for(var t=new Array;this.postponedCodeBoxElements.length>0;){for(var i=0,n=0;n<this.postponedCodeBoxElements.length;n++){var r=this.postponedCodeBoxElements[n],a=r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Extends"];if(void 0!==a){var s=this.createdCodeBoxesById.get(a);if(s){try{var l=new he(r,e,s),d=r.dataset[o.DATA_ATTRIBUTE_PREFIX+"Id"];void 0===d||this.createdCodeBoxesById.has(d)||this.createdCodeBoxesById.set(d,l),t.push({codeBox:l,rootElement:r})}catch(e){console.error(e)}this.postponedCodeBoxElements.splice(n,1),n--,i++}}else this.postponedCodeBoxElements.splice(n,1),n--}if(0===i)break}return this.postponedCodeBoxElements.splice(0,this.postponedCodeBoxElements.length),t},t.prototype.createCodeBoxOptionsCopy=function(e){return{lazyInit:(t=e).lazyInit,implicitActive:t.implicitActive,defaultCodeViewOptions:t.defaultCodeViewOptions&&r(t.defaultCodeViewOptions),noCodeViewSelectedElementHeight:t.noCodeViewSelectedElementHeight,noCodeViewSelectedText:t.noCodeViewSelectedText,minCodeViewLinesCount:t.minCodeViewLinesCount,svgSpritePath:t.svgSpritePath,svgSpriteIcons:t.svgSpriteIcons&&{codeFile:t.svgSpriteIcons.codeFile,file:t.svgSpriteIcons.file,download:t.svgSpriteIcons.download,panelOpenButton:t.svgSpriteIcons.panelOpenButton,folderArrow:t.svgSpriteIcons.folderArrow,folder:t.svgSpriteIcons.folder,project:t.svgSpriteIcons.project,package:t.svgSpriteIcons.package},folderStructureHeading:t.folderStructureHeading,packagesHeading:t.packagesHeading,projectName:t.projectName,packagesFolderPath:t.packagesFolderPath,defaultPackageName:t.defaultPackageName,createFoldersForPackages:t.createFoldersForPackages,foldersDelimiterForPackages:t.foldersDelimiterForPackages,folderAnimationSpeed:t.folderAnimationSpeed,folderAnimationEasingFunction:t.folderAnimationEasingFunction,openActiveCodeViewFolderOnInit:t.openActiveCodeViewFolderOnInit,openActiveCodeViewPackageOnInit:t.openActiveCodeViewPackageOnInit,openRootFolderOnInit:t.openRootFolderOnInit,openPanelOnInit:t.openPanelOnInit,openPanelButtonAriaLabel:t.openPanelButtonAriaLabel,closePanelButtonAriaLabel:t.closePanelButtonAriaLabel};var t},t}(_e);var we=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();const Te=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.createdCodeBoxesById=new Map,i}return we(t,e),t.prototype.getCreatedCodeBoxById=function(e){return this.createdCodeBoxesById.get(e)||null},t.prototype.createCodeBox=function(e,t){try{var i=new ge(e,t),n=e.dataset[o.DATA_ATTRIBUTE_PREFIX+"Id"];return void 0===n||this.createdCodeBoxesById.has(n)||this.createdCodeBoxesById.set(n,i),i}catch(e){return console.error(e),null}},t.prototype.createCodeBoxOptionsCopy=function(e){return{lazyInit:(t=e).lazyInit,implicitActive:t.implicitActive,defaultCodeViewOptions:t.defaultCodeViewOptions&&r(t.defaultCodeViewOptions),noCodeViewSelectedElementHeight:t.noCodeViewSelectedElementHeight,noCodeViewSelectedText:t.noCodeViewSelectedText,minCodeViewLinesCount:t.minCodeViewLinesCount};var t},t}(_e);return t})()));